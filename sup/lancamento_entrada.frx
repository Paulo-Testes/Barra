<?xml version="1.0" encoding="utf-8"?>
<inherited BaseReport="C:\Repositórios de Clientes\PESSOAS\gsr-reports\base\retrato.frx" BaseReportAbsolutePath="C:\Repositórios de Clientes\PESSOAS\gsr-reports\base\retrato.frx" ScriptLanguage="CSharp" ReportInfo.Created="02/01/2024 10:35:21" ReportInfo.Modified="06/24/2025 15:05:06" ReportInfo.CreatorVersion="2025.1.10.0">
  <ScriptText>using System;
using System.Collections;
using System.Collections.Generic;
using System.ComponentModel;
using System.Windows.Forms;
using System.Drawing;
using System.Data;
using FastReport;
using FastReport.Data;
using FastReport.Dialog;
using FastReport.Barcode;
using FastReport.Table;
using FastReport.Utils;

namespace FastReport
{
  public class ReportScript
  {
    private void parent_BndCabecalho_BeforePrint(object sender, EventArgs e)
    {
      string titulo1 = (String)Report.GetColumnValue(&quot;SqlModulo.titulo_1&quot;);
      string titulo2 = (String)Report.GetColumnValue(&quot;SqlModulo.titulo_2&quot;);

      if (string.IsNullOrWhiteSpace(titulo1) &amp;&amp; string.IsNullOrWhiteSpace(titulo2))
      {
        TxtTituloRelatorio.Top = TxtTituloModulo1.Top;
        TxtPeriodo.Top = TxtTituloModulo2.Top;
        BndCabecalho.Height = (float)75.6;
      } 
      else if (string.IsNullOrWhiteSpace(titulo1))
      {
        TxtPeriodo.Top = TxtTituloRelatorio.Top;
        TxtTituloRelatorio.Top = TxtTituloModulo2.Top;
        TxtTituloModulo2.Top = TxtTituloModulo1.Top;
        BndCabecalho.Height = (float)75.6;
      } 
      else if (string.IsNullOrWhiteSpace(titulo2))
      {
        TxtPeriodo.Top = TxtTituloRelatorio.Top;
        TxtTituloRelatorio.Top = TxtTituloModulo2.Top;
        BndCabecalho.Height = (float)75.6;
      }
      
      ImgBrasao.Height = BndCabecalho.Height;
      ImgLogo.Height = BndCabecalho.Height;
    }    
        
    private void parent_BndFiltro_BeforePrint(object sender, EventArgs e)
    {
      BndFiltro.Visible = !string.IsNullOrWhiteSpace((String)Report.GetParameterValue(&quot;filtro&quot;));
    }  
    
    private void parent_BndRodape_BeforePrint(object sender, EventArgs e)
    {
      if (string.IsNullOrWhiteSpace((String)Report.GetColumnValue(&quot;SqlEntidade.endereco&quot;))) 
      {
        TxtRodape.Top = TxtEndereco.Top;
        TxtPaginacao.Top = TxtEndereco.Top;
        TxtEndereco.Visible = false;
        BndRodape.Height = (float)15.12; 
      }
      
      TxtRodape.Text = (String)Report.GetColumnValue(&quot;SqlEntidade.sigla&quot;);

      long personalizado = (Int64)Report.GetParameterValue(&quot;personalizado&quot;);
      long imprimirUsuario = (Int64)Report.GetParameterValue(&quot;imprimirUsuario&quot;);
      long imprimirData = (Int64)Report.GetParameterValue(&quot;imprimirData&quot;);

      if (imprimirUsuario == 1)
      {
        TxtRodape.Text += &quot; | &quot; + (String)Report.GetColumnValue(&quot;SqlUsuario.nome&quot;) + (String)Report.GetColumnValue(&quot;SqlUsuario.ds_usuario&quot;);
      }

      if (personalizado == 1)
      {
        TxtRodape.Text += &quot; | PERSONALIZADO&quot;;
      }
      else if (personalizado == 2)
      {
        TxtRodape.Text += &quot; | EXCLUSIVO&quot;;
      }

      if (imprimirData == 1)
      {
        TxtRodape.Text += &quot; | &quot; + (DateTime)Report.GetVariableValue(&quot;Date&quot;);
      }
    }  

    //========================================================================================================================================
    
    private void BndItemMaterialDsCompletaOnBeforePrint(object sender, EventArgs e)
    {
      bool materialPermiteImprimirDescricaoCompleta = Convert.ToInt32(Report.GetParameterValue(&quot;SqlItem.imprime_ds_completa&quot;)) == 1;
      string dsCompleta = Report.GetParameterValue(&quot;SqlItem.ds_completa&quot;)?.ToString()?.Trim();
      bool materialPossuiDescricaoCompleta = !string.IsNullOrEmpty(dsCompleta);

      bool impDsCompleta = Convert.ToInt32(Report.GetParameterValue(&quot;ImpDsCompleta&quot;)) == 1;

      BndItemMaterialDsCompleta.Visible =
        materialPossuiDescricaoCompleta
        &amp;&amp; materialPermiteImprimirDescricaoCompleta
        &amp;&amp; impDsCompleta;
    }
                                                                                                               
    //========================================================================================================================================
    
    private void Text15_BeforePrint(object sender, EventArgs e)
    {
      // Obtém os valores do SQL (sem o operador ?. pois int não pode ser nulo)
      int parte1 = (Int32)Report.GetColumnValue(&quot;SqlLancamento.nr_autorizacao&quot;);
      int parte2 = (Int32)Report.GetColumnValue(&quot;SqlLancamento.ano_autorizacao&quot;);

      // Formata com zeros à esquerda e concatena
      Text15.Text = $&quot;{parte1.ToString().PadLeft(6, '0')}/{parte2.ToString().PadLeft(4, '0')}&quot;;
    }
         
    //========================================================================================================================================
    
    private void Text17_BeforePrint(object sender, EventArgs e)
    {
      // 1. Pega o nome do fornecedor e o documento (tratando NULLs)
      string nomeFornecedor = ((String)Report.GetColumnValue(&quot;SqlLancamento.nome_fornecedor&quot;)) ?? &quot;&quot;;
      string docFornecedor = ((String)Report.GetColumnValue(&quot;SqlLancamento.doc_fornecedor&quot;)) ?? &quot;&quot;;

      // 2. Filtra apenas dígitos do CNPJ
      string numeros = &quot;&quot;;
      foreach (char c in docFornecedor)
      {
        if (char.IsDigit(c)) numeros += c;
      }

      // 3. Formata o CNPJ (00.000.000/0000-00)
      string cnpjFormatado = numeros.PadLeft(14, '0');
      if (cnpjFormatado.Length == 14)
      {
        cnpjFormatado = string.Format(
          &quot;({0}.{1}.{2}/{3}-{4})&quot;,
          cnpjFormatado.Substring(0, 2),
          cnpjFormatado.Substring(2, 3),
          cnpjFormatado.Substring(5, 3),
          cnpjFormatado.Substring(8, 4),
          cnpjFormatado.Substring(12, 2)
          );
      }
      else
      {
        cnpjFormatado = &quot;00.000.000/0000-00&quot;; // Padrão para CNPJ inválido
      }

      // 4. Combina nome + CNPJ (se o nome existir)
      Text17.Text = string.IsNullOrEmpty(nomeFornecedor) 
        ? cnpjFormatado 
        : $&quot;{nomeFornecedor} - {cnpjFormatado}&quot;;
    }
    
    //========================================================================================================================================
    
  }
}</ScriptText>
  <Dictionary>
    <PostgresDataConnection Name="Connection" ConnectionString="rijcmlqiSaocAniJQNoKNFeaTFzMe98Srvu/H0B5rG99iH0rlAD52+0S9jQVqtbGjnQ1fJfcaegeqkp60BrLd+YLnR4XqyfZaBNherXEOpLePTulRqrY+ChMEL6VHdEuu5eaQq8E+ZDa9Ad9YImM+XDJvP1O3TVTYVCi3uCNG7OwtMDg7U=">
      <TableDataSource Name="SqlEntidade" Restrictions="DontMove, DontResize, DontModify, DontEdit, DontDelete" DataType="System.Int32" Enabled="true" SelectCommand="select coalesce(enti.ds_entidade, lice.ds_licenciado) as nome&#13;&#10;     , pess.documento_formatado as cnpj&#13;&#10;     , lice.imagem as brasao&#13;&#10;     , coalesce(enti.sigla, lice.sigla) as sigla&#13;&#10;     , enti.imagem as logo&#13;&#10;     , case when enti.id_entidade is not null then ende.endereco end as endereco&#13;&#10;     , fone.contato as telefone&#13;&#10;     , mail.contato as email&#13;&#10;     , site.contato as site&#13;&#10;  from sis_licenciado            lice&#13;&#10;  left join sis_entidade         enti on enti.id_entidade        = :id_entidade&#13;&#10;  left join sis_pessoa           pess on pess.id_pessoa_juridica = enti.id_pessoa_juridica&#13;&#10;  left join sis_pessoa_endereco  ende on ende.id_pessoa          = pess.id_pessoa&#13;&#10;                                     and ende.principal          = 1&#13;&#10;  left join sis_pessoa_contato   fone on fone.id_pessoa          = pess.id_pessoa&#13;&#10;                                     and fone.id_tp_contato      = 2&#13;&#10;                                     and fone.principal          = true&#13;&#10;  left join sis_pessoa_contato   mail on mail.id_pessoa          = pess.id_pessoa&#13;&#10;                                     and mail.id_tp_contato      = 1&#13;&#10;                                     and mail.principal          = true&#13;&#10;  left join sis_pessoa_contato   site on site.id_pessoa          = pess.id_pessoa&#13;&#10;                                     and site.id_tp_contato      = 4&#13;&#10;                                     and site.principal          = true&#13;&#10; limit 1">
        <Column Name="nome" Restrictions="DontMove, DontResize, DontModify, DontEdit, DontDelete" DataType="System.String"/>
        <Column Name="endereco" Restrictions="DontMove, DontResize, DontModify, DontEdit, DontDelete" DataType="System.String"/>
        <Column Name="telefone" Restrictions="DontMove, DontResize, DontModify, DontEdit, DontDelete" DataType="System.String"/>
        <Column Name="cnpj" Restrictions="DontMove, DontResize, DontModify, DontEdit, DontDelete" DataType="System.String"/>
        <Column Name="brasao" Restrictions="DontMove, DontResize, DontModify, DontEdit, DontDelete" DataType="System.Byte[]" BindableControl="Picture"/>
        <Column Name="sigla" Restrictions="DontMove, DontResize, DontModify, DontEdit, DontDelete" DataType="System.String"/>
        <Column Name="logo" Restrictions="DontMove, DontResize, DontModify, DontEdit, DontDelete" DataType="System.Byte[]" BindableControl="Picture"/>
        <Column Name="email" Restrictions="DontMove, DontResize, DontModify, DontEdit, DontDelete" DataType="System.String"/>
        <Column Name="site" Restrictions="DontMove, DontResize, DontModify, DontEdit, DontDelete" DataType="System.String"/>
        <CommandParameter Name="id_entidade" DataType="9" Expression="[idEntidade]"/>
      </TableDataSource>
      <TableDataSource Name="SqlModulo" Restrictions="DontMove, DontResize, DontModify, DontEdit, DontDelete" DataType="System.Int32" Enabled="true" SelectCommand="select a.titulo_1&#13;&#10;     , a.titulo_2&#13;&#10;  from sis_modulo a&#13;&#10; where a.id_modulo = :id_modulo">
        <Column Name="titulo_1" Restrictions="DontMove, DontResize, DontModify, DontEdit, DontDelete" DataType="System.String"/>
        <Column Name="titulo_2" Restrictions="DontMove, DontResize, DontModify, DontEdit, DontDelete" DataType="System.String"/>
        <CommandParameter Name="id_modulo" DataType="9" Expression="[idModulo]"/>
      </TableDataSource>
      <TableDataSource Name="SqlUsuario" Restrictions="DontMove, DontResize, DontModify, DontEdit, DontDelete" DataType="System.Int32" Enabled="true" SelectCommand="select log.nome&#13;&#10;     , case when usu.ds_usuario is not null then ' (' || trim(usu.ds_usuario) || ')' end as ds_usuario &#13;&#10;  from sis_login log &#13;&#10;  left join sis_usuario usu on usu.id_usuario = :id_usuario&#13;&#10; where log.id_login = :id_login&#13;&#10; limit 1">
        <Column Name="ds_usuario" Restrictions="DontMove, DontResize, DontModify, DontEdit, DontDelete" DataType="System.String"/>
        <Column Name="nome" Restrictions="DontMove, DontResize, DontModify, DontEdit, DontDelete" DataType="System.String"/>
        <CommandParameter Name="id_login" DataType="9" Expression="[idLogin]"/>
        <CommandParameter Name="id_usuario" DataType="9" Expression="[idUsuario]"/>
      </TableDataSource>
      <TableDataSource Name="Table" Alias="SqlLancamento" DataType="System.Int32" Enabled="true" SelectCommand="SELECT&#13;&#10;  A.ID_LANCAMENTO,&#13;&#10;  A.NR_LANCAMENTO,&#13;&#10;  A.NR_DOCUMENTO,&#13;&#10;  A.DT_LANCAMENTO,&#13;&#10;  A.ANO_DOCUMENTO,&#13;&#10;  A.OBS,&#13;&#10;  C.CD_UNIDADE_ESTOQUE,&#13;&#10;  C.DS_UNIDADE_ESTOQUE,&#13;&#10;  D.CD_ALMOXARIFADO,&#13;&#10;  D.DS_ALMOXARIFADO,&#13;&#10;  B.TP_ENTRADA,                                        &#13;&#10;  CASE WHEN B.TP_ENTRADA = 0 THEN 'AF'&#13;&#10;	      WHEN B.TP_ENTRADA = 1 THEN 'Sem AF'&#13;&#10;       WHEN B.TP_ENTRADA = 2 THEN 'Inventário'&#13;&#10;       WHEN B.TP_ENTRADA = 3 THEN 'Doação'&#13;&#10;       WHEN B.TP_ENTRADA = 4 THEN 'Transferência'&#13;&#10;       WHEN B.TP_ENTRADA = 5 THEN 'Estorno saída'&#13;&#10;       WHEN B.TP_ENTRADA = 6 THEN 'Outros'&#13;&#10;       WHEN B.TP_ENTRADA = 7 THEN 'Transferência de conta contábil de estoque'&#13;&#10;       WHEN B.TP_ENTRADA = 8 THEN 'Produto acabado'&#13;&#10;       ELSE 'Desconhecido' END DS_TP_ENTRADA,&#13;&#10;  (SELECT COUNT(1)&#13;&#10;     FROM SUP_LANCAMENTO_IT IT&#13;&#10;    WHERE IT.ID_LANCAMENTO = A.ID_LANCAMENTO) AS QTD_ITENS,           &#13;&#10;  L.VL_TOTAL,&#13;&#10;  E1.ID_SERIE_NF                            AS TP_DOC_FISCAL,&#13;&#10;  E1.SERIE_NF                               AS SR_DOC_FISCAL,&#13;&#10;  E.NR_NF                                   AS NR_DOC_FISCAL,&#13;&#10;  E.DS_NF                                   AS DS_DOC_FISCAL,&#13;&#10;  E.DT_EMISSAO,&#13;&#10;  E.VL_NF,&#13;&#10;  E.VL_DESCONTO                             AS VL_DESCONTO_NF,&#13;&#10;  ROUND(E.VL_NF - E.VL_DESCONTO, 2)  AS VL_LIQUIDO_NF,&#13;&#10;  E1.ID_TP_NF_ELETRONICA - 1                AS ELETRONICA,&#13;&#10;  CAST( CASE WHEN E1.ID_TP_NF_ELETRONICA = 2&#13;&#10;             THEN SUBSTR(E.CHAVE,1,44)&#13;&#10;             ELSE NULL&#13;&#10;         END AS VARCHAR(44)               ) AS CHAVE,&#13;&#10;  CAST( CASE WHEN E1.ID_TP_NF_ELETRONICA = 3&#13;&#10;             THEN E.CHAVE&#13;&#10;             ELSE NULL&#13;&#10;         END AS VARCHAR(60)               ) AS CHAVE_MUNICIPAL,&#13;&#10;  E.AIDF,&#13;&#10;  H.ID_TP_PESSOA,      &#13;&#10;  H.NOME_RAZAO                              AS NOME_FORNECEDOR,&#13;&#10;  CASE WHEN H.ID_TP_PESSOA = 1 THEN N.CNPJ&#13;&#10;       WHEN H.ID_TP_PESSOA = 2 THEN O.CPF&#13;&#10;       ELSE H.CD_ESPECIAL END DOC_FORNECEDOR,      &#13;&#10;  B2.CD_CENTRO_CONSUMO,&#13;&#10;  B2.DS_CENTRO_CONSUMO,&#13;&#10;  M.CD_UNIDADE_ADM,&#13;&#10;  M.DS_UNIDADE_ADM,&#13;&#10;  I.ds_usuario                                    AS NOME_ALMOXARIFE,&#13;&#10;  I.nome_usuario                           AS NOME_COMPLETO_ALMOXARIFE,&#13;&#10;  K.NR_AUTORIZACAO,&#13;&#10;  K.ANO_AUTORIZACAO,&#13;&#10;  CAST(COALESCE(B.RESPONSAVEL, I.nome_usuario) AS VARCHAR(100))  AS NOME_RESPONSAVEL&#13;&#10;  FROM SUP_LANCAMENTO A&#13;&#10;       INNER JOIN SUP_LANCAMENTO_ENTRADA  B  ON B.ID_LANCAMENTO           = A.ID_LANCAMENTO&#13;&#10;       LEFT  JOIN (SELECT MIN(SLC.ID_LANCAMENTO) AS ID_LANCAMENTO,&#13;&#10;                          SLC.ID_LANCAMENTO_ENTRADA,&#13;&#10;                          SLC.ID_CENTRO_CONSUMO&#13;&#10;                     FROM SUP_LANCAMENTO_SAIDA SLC &#13;&#10;                    WHERE SLC.ID_LANCAMENTO_ENTRADA = :ID_LANCAMENTO                                                                                    &#13;&#10;                      AND SLC.ID_CENTRO_CONSUMO IS NOT NULL&#13;&#10;                 GROUP BY SLC.ID_LANCAMENTO_ENTRADA,&#13;&#10;                          SLC.ID_CENTRO_CONSUMO) 			  B1 ON B1.ID_LANCAMENTO_ENTRADA  = B.ID_LANCAMENTO&#13;&#10;       LEFT  JOIN SUP_UNIDADE_ESTOQUE     C  ON C.ID_UNIDADE_ESTOQUE      = A.ID_UNIDADE_ESTOQUE&#13;&#10;       LEFT  JOIN SUP_CENTRO_CONSUMO      B2 ON B2.ID_CENTRO_CONSUMO      = B1.ID_CENTRO_CONSUMO&#13;&#10;       LEFT  JOIN SUP_ALMOXARIFADO        D  ON D.ID_ALMOXARIFADO         = A.ID_ALMOXARIFADO&#13;&#10;       LEFT  JOIN SIS_PESSOA_NF           E  ON E.ID_PESSOA_NF            = B.ID_DOC_FISCAL&#13;&#10;       LEFT  JOIN SIS_SERIE_NF            E1 ON E1.ID_SERIE_NF            = E.ID_SERIE_NF&#13;&#10;       --LEFT  JOIN SUP_FORNECEDOR          F  ON F.ID_FORNECEDOR           = B.ID_FORNECEDOR&#13;&#10;       LEFT  JOIN SIS_PESSOA              H  ON H.ID_PESSOA               = B.ID_FORNECEDOR --F.ID_CREDOR&#13;&#10;       LEFT  JOIN SIS_USUARIO             I  ON I.id_usuario              = A.ID_USUARIO&#13;&#10;       LEFT  JOIN SUP_LIBERACAO_NF        J  ON J.ID_LIBERACAO_NF         = B.ID_LIBERACAO_NF&#13;&#10;       LEFT  JOIN SUP_AUTORIZACAO         K  ON K.ID_AUTORIZACAO          = J.ID_AUTORIZACAO&#13;&#10;       LEFT  JOIN (SELECT L.ID_LANCAMENTO, SUM(L.VL_TOTAL) AS VL_TOTAL&#13;&#10;                     FROM SUP_LANCAMENTO_IT L&#13;&#10;                    GROUP BY&#13;&#10;                         L.ID_LANCAMENTO) L  ON L.ID_LANCAMENTO           = A.ID_LANCAMENTO&#13;&#10;       LEFT  JOIN SUP_UNIDADE_ADM 		      M  ON M.ID_UNIDADE_ADM 	     	  = B2.ID_UNIDADE_ADM&#13;&#10;       LEFT  JOIN SIS_PESSOA_JURIDICA     N  ON N.ID_PESSOA_JURIDICA      = H.ID_PESSOA_JURIDICA&#13;&#10;       LEFT  JOIN SIS_PESSOA_FISICA       O  ON O.ID_PESSOA_FISICA        = H.ID_PESSOA_FISICA      &#13;&#10; WHERE (A.ID_LANCAMENTO = :ID_LANCAMENTO OR B.ID_LIBERACAO_NF = :ID_LIBERACAO_NF)">
        <Column Name="id_lancamento" DataType="System.Int32"/>
        <Column Name="nr_lancamento" DataType="System.Int32"/>
        <Column Name="nr_documento" DataType="System.Int32"/>
        <Column Name="dt_lancamento" DataType="System.DateTime"/>
        <Column Name="ano_documento" DataType="System.Int16"/>
        <Column Name="obs" DataType="System.String"/>
        <Column Name="cd_unidade_estoque" DataType="System.Int32"/>
        <Column Name="ds_unidade_estoque" DataType="System.String"/>
        <Column Name="cd_almoxarifado" DataType="System.Int32"/>
        <Column Name="ds_almoxarifado" DataType="System.String"/>
        <Column Name="tp_entrada" DataType="System.Int16"/>
        <Column Name="ds_tp_entrada" DataType="System.String"/>
        <Column Name="qtd_itens" DataType="System.Int64"/>
        <Column Name="vl_total" DataType="System.Double"/>
        <Column Name="tp_doc_fiscal" DataType="System.Int32"/>
        <Column Name="sr_doc_fiscal" DataType="System.String"/>
        <Column Name="nr_doc_fiscal" DataType="System.String"/>
        <Column Name="ds_doc_fiscal" DataType="System.String"/>
        <Column Name="dt_emissao" DataType="System.DateTime"/>
        <Column Name="vl_nf" DataType="System.Double"/>
        <Column Name="vl_desconto_nf" DataType="System.Double"/>
        <Column Name="vl_liquido_nf" DataType="System.Double"/>
        <Column Name="eletronica" DataType="System.Int32"/>
        <Column Name="chave" DataType="System.String"/>
        <Column Name="chave_municipal" DataType="System.String"/>
        <Column Name="aidf" DataType="System.String"/>
        <Column Name="id_tp_entidade" DataType="System.Int32"/>
        <Column Name="nome_fornecedor" DataType="System.String"/>
        <Column Name="doc_fornecedor" DataType="System.String"/>
        <Column Name="cd_centro_consumo" DataType="System.Int32"/>
        <Column Name="ds_centro_consumo" DataType="System.String"/>
        <Column Name="cd_unidade_adm" DataType="System.Int32"/>
        <Column Name="ds_unidade_adm" DataType="System.String"/>
        <Column Name="nome_almoxarife" DataType="System.String"/>
        <Column Name="nome_completo_almoxarife" DataType="System.String"/>
        <Column Name="nr_autorizacao" DataType="System.Int32"/>
        <Column Name="ano_autorizacao" DataType="System.Int32"/>
        <Column Name="nome_responsavel" DataType="System.String"/>
        <CommandParameter Name="ID_LANCAMENTO" DataType="9" Expression="[IdLancamento]"/>
        <CommandParameter Name="ID_LANCAMENTO" DataType="9" Expression="[IdLancamento]"/>
        <CommandParameter Name="ID_LIBERACAO_NF" DataType="9" Expression="[IdLiberacaoNf]"/>
      </TableDataSource>
      <TableDataSource Name="Table1" Alias="SqlItem" DataType="System.Int32" Enabled="true" SelectCommand="SELECT&#13;&#10;  A.ID_LANCAMENTO_IT,&#13;&#10;  B.TP_MATERIAL,&#13;&#10;  C.CD_GRUPO AS CD_SUBGRUPO,&#13;&#10;  D.CD_GRUPO,&#13;&#10;  LPAD(B.CD_MATERIAL, 6, '0') as CD_MATERIAL,&#13;&#10;  B.DS_MATERIAL,&#13;&#10;  B.UN_MATERIAL,&#13;&#10;  B.IMPRIME_DS_COMPLETA,&#13;&#10;  B.DS_COMPLETA,&#13;&#10;  B.CONTROLA_VALIDADE,&#13;&#10;  A.QTD,&#13;&#10;  (A.VL_TOTAL / A.QTD) AS VL_UNITARIO,&#13;&#10;  A.VL_TOTAL                        &#13;&#10;FROM&#13;&#10;  SUP_LANCAMENTO_IT A&#13;&#10;  LEFT JOIN SUP_MATERIAL B ON B.ID_MATERIAL = A.ID_MATERIAL&#13;&#10;  LEFT JOIN SUP_GRUPO C ON C.ID_GRUPO = B.ID_GRUPO&#13;&#10;  LEFT JOIN SUP_GRUPO D ON D.ID_GRUPO = C.ID_GRUPO_PAI&#13;&#10;WHERE A.ID_LANCAMENTO = :ID_LANCAMENTO&#13;&#10;">
        <Column Name="id_lancamento_it" DataType="System.Int32"/>
        <Column Name="tp_material" DataType="System.Int16"/>
        <Column Name="cd_subgrupo" DataType="System.Int32"/>
        <Column Name="cd_grupo" DataType="System.Int32"/>
        <Column Name="cd_material" DataType="System.String"/>
        <Column Name="ds_material" DataType="System.String"/>
        <Column Name="un_material" DataType="System.String"/>
        <Column Name="imprime_ds_completa" DataType="System.Int16"/>
        <Column Name="ds_completa" DataType="System.String"/>
        <Column Name="controla_validade" DataType="System.Int16"/>
        <Column Name="qtd" DataType="System.Double"/>
        <Column Name="vl_unitario" DataType="System.Double"/>
        <Column Name="vl_total" DataType="System.Double"/>
        <CommandParameter Name="ID_LANCAMENTO" DataType="9" Expression="[IdLancamento]"/>
      </TableDataSource>
    </PostgresDataConnection>
    <Parameter Name="tituloRelatorio" DataType="System.String" Expression="&quot;Nome do Relatório&quot;"/>
    <Parameter Name="idEntidade" DataType="System.Int64" Expression="-1"/>
    <Parameter Name="idModulo" DataType="System.Int64" Expression="-1"/>
    <Parameter Name="idLogin" DataType="System.Int64" Expression="-1"/>
    <Parameter Name="idUsuario" DataType="System.Int64" Expression="-1"/>
    <Parameter Name="idRelatorioFiltro" DataType="System.Int64" Expression="-1"/>
    <Parameter Name="periodo" DataType="System.String" Expression="&quot;&quot;"/>
    <Parameter Name="filtro" DataType="System.String" Expression="&quot;&quot;"/>
    <Parameter Name="personalizado" DataType="System.Int64" Expression="0"/>
    <Parameter Name="imprimirUsuario" DataType="System.Int64" Expression="1"/>
    <Parameter Name="imprimirData" DataType="System.Int64" Expression="1"/>
    <Parameter Name="idLancamento" DataType="System.Int64" Expression="15496"/>
    <Parameter Name="impDsCompleta" DataType="System.Int64" Expression="0"/>
    <Parameter Name="idLiberacaoNf" DataType="System.Int64" Expression="1"/>
    <Total Name="Total" Expression="[SqlItem.vl_total]" Evaluator="BndItemMaterial"/>
  </Dictionary>
  <inherited Name="MainPage">
    <inherited Name="BndCabecalho" Top="0">
      <inherited Name="ImgBrasao" ImageAlign="Center_Center"/>
      <inherited Name="TxtEntidade"/>
      <inherited Name="ImgLogo" ImageAlign="Center_Center"/>
      <inherited Name="TxtTituloModulo1"/>
      <inherited Name="TxtTituloModulo2"/>
      <inherited Name="TxtTituloRelatorio"/>
      <inherited Name="TxtPeriodo"/>
      <inherited Name="BndFiltro" Top="98.35">
        <inherited Name="TxtFiltro"/>
        <ChildBand Name="Child1" ZOrder="-1" Top="121.09" Width="718.2" Height="23.06">
          <TextObject Name="Text1" Top="4.16" Width="280.1" Height="18.9" Fill.Color="41, 82, 118" Text="NÚMERO DO LANÇAMENTO: [SqlLancamento.nr_lancamento]" Font="Tahoma, 11pt, style=Bold" TextFill.Color="White"/>
        </ChildBand>
      </inherited>
    </inherited>
    <DataBand Name="BndLancamento" ZOrder="0" Top="148" Width="718.2" Height="60.48" CanGrow="true" DataSource="Table">
      <ContainerObject Name="Container1" Width="718.2" Height="60.48">
        <TextObject Name="Text2" Width="130.03" Height="20.03" Border.Lines="All" Text="Data do Lançamento:" HorzAlign="Right" VertAlign="Center" Font="Tahoma, 8pt"/>
        <TextObject Name="Text3" Left="130.03" Width="74.84" Height="20.03" Border.Lines="All" Fill.Color="ButtonFace" CanGrow="true" Text="[SqlLancamento.dt_lancamento]&#13;&#10;" Format="Date" Format.Format="dd/MM/yyyy" HorzAlign="Center" VertAlign="Center" Font="Tahoma, 7pt, style=Bold"/>
        <TextObject Name="Text4" Left="204.88" Width="88.83" Height="20.03" Border.Lines="All" CanGrow="true" Text="Tipo de Entrada:" HorzAlign="Right" VertAlign="Center" Font="Tahoma, 8pt"/>
        <TextObject Name="Text5" Left="292.95" Width="425.25" Height="20.03" Border.Lines="All" Fill.Color="ButtonFace" CanGrow="true" Text="[SqlLancamento.ds_tp_entrada]&#13;&#10;" VertAlign="Center" Font="Tahoma, 8pt, style=Bold"/>
        <TextObject Name="Text6" Top="20.03" Width="130.03" Height="20.03" Border.Lines="All" CanGrow="true" Text="Almoxarifado:" HorzAlign="Right" VertAlign="Center" Font="Tahoma, 8pt"/>
        <TextObject Name="Text7" Left="130.03" Top="20.03" Width="588.17" Height="20.03" Border.Lines="All" CanGrow="true" Text="[Trim([SqlLancamento.DS_ALMOXARIFADO])] - ([SqlLancamento.CD_ALMOXARIFADO])&#13;&#10;" VertAlign="Center" Font="Tahoma, 8pt, style=Bold"/>
        <TextObject Name="Text8" Top="40.07" Width="130.03" Height="20.03" Border.Lines="All" CanGrow="true" Text="Unidade de Estoque:" HorzAlign="Right" VertAlign="Center" Font="Tahoma, 8pt"/>
        <TextObject Name="Text9" Left="130.03" Top="40.07" Width="588.17" Height="20.03" Border.Lines="All" CanGrow="true" Text="[Trim([SqlLancamento.DS_UNIDADE_ESTOQUE])] - ([SqlLancamento.CD_UNIDADE_ESTOQUE])&#13;&#10;" VertAlign="Center" Font="Tahoma, 8pt, style=Bold"/>
      </ContainerObject>
      <ChildBand Name="BndLancamentoNormal" Top="212.32" Width="718.2" Height="85.05" CanGrow="true">
        <ContainerObject Name="Container2" Width="718.2" Height="85.05">
          <TextObject Name="Text12" Top="20.03" Width="130.03" Height="20.03" Border.Lines="All" CanGrow="true" Text="Centro de Consumo:" HorzAlign="Right" VertAlign="Center" Font="Tahoma, 8pt"/>
          <TextObject Name="Text10" Width="130.03" Height="20.03" Border.Lines="All" CanGrow="true" Text="Unidade Administrativa:" HorzAlign="Right" VertAlign="Center" Font="Tahoma, 8pt"/>
          <TextObject Name="Text11" Left="130.03" Width="588.17" Height="20.03" Border.Lines="All" CanGrow="true" Text="[IIf([SqlLancamento.cd_unidade_adm] != 0, [SqlLancamento.ds_unidade_adm]+ &quot; - &quot;+&quot;(&quot; + [SqlLancamento.cd_unidade_adm] + &quot;)&quot;, &quot;- &quot;)]&#13;&#10;" VertAlign="Center" Font="Tahoma, 8pt, style=Bold"/>
          <TextObject Name="Text14" Top="40.07" Width="130.03" Height="20.03" Border.Lines="All" CanGrow="true" Text="AF:" HorzAlign="Right" VertAlign="Center" Font="Tahoma, 8pt"/>
          <TextObject Name="Text15" Left="130.03" Top="40.07" Width="588.17" Height="20.03" Border.Lines="All" CanGrow="true" BeforePrintEvent="Text15_BeforePrint" Text="[IIf([SqlLancamento.nr_autorizacao] != 0, [SqlLancamento.nr_autorizacao]+&quot;/&quot;+[SqlLancamento.ano_autorizacao], &quot; - &quot;)]" Format="Custom" Format.Format=" 000-000-000" VertAlign="Center" Font="Tahoma, 8pt, style=Bold"/>
          <TextObject Name="Text16" Top="60.1" Width="130.03" Height="20.03" Border.Lines="All" CanGrow="true" Text="Fornecedor:" HorzAlign="Right" VertAlign="Center" Font="Tahoma, 8pt"/>
          <TextObject Name="Text17" Left="130.03" Top="60.1" Width="588.17" Height="20.03" Border.Lines="All" CanGrow="true" BeforePrintEvent="Text17_BeforePrint" Text="[IIf([SqlLancamento.nome_fornecedor] != &quot; &quot;, [SqlLancamento.nome_fornecedor]+&quot; - &quot;+[SqlLancamento.doc_fornecedor], &quot; - &quot;)]&#13;&#10;" Format="Custom" Format.Format=" 000-000-000" VertAlign="Center" Font="Tahoma, 8pt, style=Bold"/>
          <TextObject Name="Text97" Left="130.03" Top="20.03" Width="588.17" Height="20.03" Border.Lines="All" CanGrow="true" Text="[IIf([SqlLancamento.CD_CENTRO_CONSUMO] != 0, [SqlLancamento.DS_CENTRO_CONSUMO] + &quot; - &quot; + &quot;(&quot;+ [SqlLancamento.CD_CENTRO_CONSUMO] + &quot;)&quot; , &quot; - &quot;)]&#13;&#10;" VertAlign="Center" Font="Tahoma, 8pt, style=Bold"/>
        </ContainerObject>
        <ChildBand Name="BndDocFiscal" Top="301.22" Width="718.2" Height="20.03">
          <TextObject Name="Text18" Width="130.03" Height="20.03" Border.Lines="All" Text="Documento Fiscal:" HorzAlign="Right" VertAlign="Center" Font="Tahoma, 8pt"/>
          <TextObject Name="Text19" Left="130.03" Width="588.17" Height="20.03" Border.Lines="All" Text="[SqlLancamento.ds_doc_fiscal]&#13;&#10;" VertAlign="Center" Font="Tahoma, 8pt, style=Bold"/>
          <ChildBand Name="BndJustificativa" Top="325.1" Width="718.2" Height="50.27" CanGrow="true" CanBreak="true">
            <TextObject Name="Text20" Top="11.34" Width="199.96" Height="20.03" Border.Lines="All" Fill.Color="ButtonFace" Text="Observação:" VertAlign="Center" Font="Tahoma, 8pt"/>
            <TextObject Name="Text21" Top="31.37" Width="718.2" Height="18.9" Border.Lines="Left, Right, Top" CanGrow="true" GrowToBottom="true" Text="[SqlLancamento.obs]" VertAlign="Center" Font="Tahoma, 8pt"/>
          </ChildBand>
        </ChildBand>
      </ChildBand>
    </DataBand>
    <GroupHeaderBand Name="GroupHeader1" ZOrder="1" Top="379.21" Width="718.2" Height="29.86" RepeatOnEveryPage="true" Condition="[SqlLancamento.id_lancamento]">
      <TextObject Name="Text75" Width="48.76" Height="29.86" Border.Lines="All" Fill.Color="ButtonFace" CanBreak="false" Text="CÓDIGO" VertAlign="Center" Font="Tahoma, 8pt"/>
      <TextObject Name="Text76" Left="48.76" Width="373.84" Height="29.86" Border.Lines="All" Fill.Color="ButtonFace" CanBreak="false" Text="&#13;&#10;CLASSIFICAÇÃO E DESCRIÇÃO DO MATERIAL&#13;&#10;" HorzAlign="Center" VertAlign="Center" Font="Tahoma, 8pt" TextRenderType="HtmlParagraph"/>
      <TextObject Name="Text77" Left="453.98" Width="74.84" Height="29.86" Anchor="Top, Left, Right" Border.Lines="All" Fill.Color="ButtonFace" CanBreak="false" Text="QUANTIDADE&#13;&#10;" HorzAlign="Center" VertAlign="Center" Font="Tahoma, 8pt"/>
      <TextObject Name="Text78" Left="422.6" Width="31.37" Height="29.86" Border.Lines="All" Fill.Color="ButtonFace" BeforePrintEvent="Text78_BeforePrint" CanBreak="false" Text="UN" HorzAlign="Center" VertAlign="Center" Font="Tahoma, 8pt"/>
      <TextObject Name="Text79" Left="528.82" Width="94.5" Height="29.86" Anchor="Top, Left, Right" Border.Lines="All" Fill.Color="ButtonFace" CanBreak="false" Text="VL. UNITÁRIO" HorzAlign="Center" VertAlign="Center" Font="Tahoma, 8pt"/>
      <TextObject Name="Text80" Left="623.32" Width="94.5" Height="29.86" Anchor="Top, Left, Right" Border.Lines="All" Fill.Color="ButtonFace" CanBreak="false" Text="VALOR TOTAL" HorzAlign="Center" VertAlign="Center" Font="Tahoma, 8pt"/>
      <DataBand Name="BndItemMaterial" Top="412.92" Width="718.2" Height="20.03" CanGrow="true" BeforePrintEvent="BndItemMaterialDsCompletaOnBeforePrint" DataSource="Table1">
        <TextObject Name="Text81" Width="48.76" Height="20.03" Anchor="Top, Left, Right" Border.Lines="All" Fill.Color="53, 103, 149" CanGrow="true" CanBreak="false" Text="[SqlItem.cd_material]&#13;&#10;" VertAlign="Center" Font="Tahoma, 8pt" TextFill.Color="White"/>
        <TextObject Name="Text82" Left="48.76" Width="373.84" Height="20.03" Border.Lines="All" CanGrow="true" GrowToBottom="true" CanBreak="false" Text="&lt;u&gt;[SqlItem.TP_MATERIAL].[SqlItem.CD_GRUPO].[SqlItem.CD_SUBGRUPO]. &lt;b&gt;[SqlItem.CD_MATERIAL]&lt;/b&gt;&lt;/u&gt;&#13;&#10;&lt;b&gt;[SqlItem.DS_MATERIAL]&lt;/b&gt;&#13;&#10;" VertAlign="Center" Font="Tahoma, 8pt" TextRenderType="HtmlParagraph">
          <Formats>
            <GeneralFormat/>
            <CustomFormat Format="000"/>
            <CustomFormat Format="000"/>
            <CustomFormat Format="00000000"/>
            <GeneralFormat/>
          </Formats>
        </TextObject>
        <TextObject Name="Text83" Left="453.98" Width="74.84" Height="20.03" Anchor="Top, Left, Right" Border.Lines="All" CanGrow="true" GrowToBottom="true" CanBreak="false" Text="[SqlItem.qtd]&#13;&#10;" Format="Number" Format.UseLocale="true" Format.DecimalDigits="4" HorzAlign="Center" VertAlign="Center" Font="Tahoma, 8pt"/>
        <TextObject Name="Text84" Left="422.6" Width="31.37" Height="20.03" Border.Lines="All" CanGrow="true" GrowToBottom="true" BeforePrintEvent="Text78_BeforePrint" CanBreak="false" Text="[SqlItem.UN_MATERIAL]&#13;&#10;" HorzAlign="Center" VertAlign="Center" Font="Tahoma, 8pt" TextRenderType="HtmlParagraph"/>
        <TextObject Name="Text85" Left="528.82" Width="94.5" Height="20.03" Anchor="Top, Left, Right" Border.Lines="All" CanGrow="true" GrowToBottom="true" CanBreak="false" Text="[SqlItem.vl_unitario]&#13;&#10;" Format="Number" Format.UseLocale="true" Format.DecimalDigits="2" HorzAlign="Center" VertAlign="Center" Font="Tahoma, 8pt"/>
        <TextObject Name="Text86" Left="623.32" Width="94.5" Height="20.03" Anchor="Top, Left, Right" Border.Lines="All" CanGrow="true" GrowToBottom="true" CanBreak="false" Text="[SqlItem.vl_total]&#13;&#10;" Format="Number" Format.UseLocale="true" Format.DecimalDigits="2" HorzAlign="Center" VertAlign="Center" Font="Tahoma, 8pt"/>
        <ChildBand Name="BndItemMaterialDsCompleta" Top="436.8" Width="718.2" Height="20.03" CanGrow="true" BeforePrintEvent="BndItemMaterialDsCompletaOnBeforePrint" CanBreak="true">
          <TextObject Name="Text87" Left="48.76" Width="373.84" Height="20.03" Border.Lines="Left, Right" CanGrow="true" GrowToBottom="true" CanBreak="false" Text="&#13;&#10;&lt;i&gt;&lt;u&gt;DESCRIÇÃO COMPLETA:&lt;/u&gt;&lt;/i&gt; [SqlItem.DS_COMPLETA]&#13;&#10;" HorzAlign="Justify" VertAlign="Center" Font="Tahoma, 8pt" TextRenderType="HtmlParagraph"/>
          <TextObject Name="Text88" Left="453.98" Width="74.84" Height="20.03" Anchor="Top, Left, Right" Border.Lines="Left, Right" CanGrow="true" GrowToBottom="true" CanBreak="false" HorzAlign="Center" VertAlign="Center" Font="Tahoma, 8pt"/>
          <TextObject Name="Text89" Left="422.6" Width="31.37" Height="20.03" Border.Lines="Left, Right" CanGrow="true" GrowToBottom="true" BeforePrintEvent="Text78_BeforePrint" CanBreak="false" HorzAlign="Justify" Font="Tahoma, 8pt"/>
          <TextObject Name="Text90" Left="528.82" Width="94.5" Height="20.03" Anchor="Top, Left, Right" Border.Lines="Left, Right" CanGrow="true" GrowToBottom="true" CanBreak="false" HorzAlign="Right" Font="Tahoma, 8pt"/>
          <TextObject Name="Text91" Left="623.32" Width="94.5" Height="20.03" Anchor="Top, Left, Right" Border.Lines="Left, Right" CanGrow="true" GrowToBottom="true" CanBreak="false" HorzAlign="Right" Font="Tahoma, 8pt"/>
        </ChildBand>
      </DataBand>
      <GroupFooterBand Name="GroupFooter1" Top="460.67" Width="718.2" Height="198.45">
        <TextObject Name="Text92" Width="622.57" Height="18.9" Border.Lines="All" Text="Quantidade de itens: [SqlLancamento.qtd_itens]&#13;&#10;" Format="Custom" Format.Format="00" VertAlign="Center" Font="Tahoma, 8pt, style=Bold"/>
        <TextObject Name="Text93" Left="622.57" Width="95.63" Height="18.9" Anchor="Top, Left, Right" Border.Lines="All" CanBreak="false" Text="[Total]" Format="Number" Format.UseLocale="true" Format.DecimalDigits="2" HorzAlign="Right" VertAlign="Center" Font="Tahoma, 8pt"/>
        <TextObject Name="Text94" Top="47.25" Width="94.5" Height="18.9" Text="Data de Entrada" HorzAlign="Justify" VertAlign="Center" Font="Arial, 8pt"/>
        <TextObject Name="Text95" Top="75.6" Width="141.75" Height="18.9" Text="_____/_____/________" HorzAlign="Justify" VertAlign="Center" Font="Arial, 8pt"/>
        <TextObject Name="Text96" Top="141.75" Width="226.8" Height="28.35" Border.Lines="Top" Text="RESPONSÁVEL&#13;&#10;[Trim([SqlLancamento.nome_responsavel])]" HorzAlign="Center" VertAlign="Center" Font="Arial, 8pt"/>
      </GroupFooterBand>
    </GroupHeaderBand>
    <inherited Name="BndRodape" Top="662.97">
      <inherited Name="TxtRodape"/>
      <inherited Name="TxtPaginacao">
        <Formats>
          <GeneralFormat/>
          <GeneralFormat/>
        </Formats>
      </inherited>
      <inherited Name="TxtEndereco">
        <Formats>
          <GeneralFormat/>
          <GeneralFormat/>
          <GeneralFormat/>
          <GeneralFormat/>
          <GeneralFormat/>
          <GeneralFormat/>
          <GeneralFormat/>
        </Formats>
      </inherited>
    </inherited>
  </inherited>
</inherited>
