<?xml version="1.0" encoding="utf-8"?>
<inherited BaseReport="C:\Repositórios de Clientes\PESSOAS\gsr-reports\base\retrato.frx" BaseReportAbsolutePath="C:\Repositórios de Clientes\PESSOAS\gsr-reports\base\retrato.frx" ScriptLanguage="CSharp" ReportInfo.Created="02/01/2024 10:35:21" ReportInfo.Modified="06/23/2025 12:59:34" ReportInfo.CreatorVersion="2025.1.10.0">
  <ScriptText>using System;
using System.Collections;
using System.Collections.Generic;
using System.ComponentModel;
using System.Windows.Forms;
using System.Drawing;
using System.Data;
using FastReport;
using FastReport.Data;
using FastReport.Dialog;
using FastReport.Barcode;
using FastReport.Table;
using FastReport.Utils;

namespace FastReport
{
  public class ReportScript
  {
    private void parent_BndCabecalho_BeforePrint(object sender, EventArgs e)
    {
      string titulo1 = (String)Report.GetColumnValue(&quot;SqlModulo.titulo_1&quot;);
      string titulo2 = (String)Report.GetColumnValue(&quot;SqlModulo.titulo_2&quot;);

      if (string.IsNullOrWhiteSpace(titulo1) &amp;&amp; string.IsNullOrWhiteSpace(titulo2))
      {
        TxtTituloRelatorio.Top = TxtTituloModulo1.Top;
        TxtPeriodo.Top = TxtTituloModulo2.Top;
        BndCabecalho.Height = (float)75.6;
      } 
      else if (string.IsNullOrWhiteSpace(titulo1))
      {
        TxtPeriodo.Top = TxtTituloRelatorio.Top;
        TxtTituloRelatorio.Top = TxtTituloModulo2.Top;
        TxtTituloModulo2.Top = TxtTituloModulo1.Top;
        BndCabecalho.Height = (float)75.6;
      } 
      else if (string.IsNullOrWhiteSpace(titulo2))
      {
        TxtPeriodo.Top = TxtTituloRelatorio.Top;
        TxtTituloRelatorio.Top = TxtTituloModulo2.Top;
        BndCabecalho.Height = (float)75.6;
      }
      
      ImgBrasao.Height = BndCabecalho.Height;
      ImgLogo.Height = BndCabecalho.Height;
    }    
        
    private void parent_BndFiltro_BeforePrint(object sender, EventArgs e)
    {
      BndFiltro.Visible = !string.IsNullOrWhiteSpace((String)Report.GetParameterValue(&quot;filtro&quot;));
    }  
    
    private void parent_BndRodape_BeforePrint(object sender, EventArgs e)
    {
      if (string.IsNullOrWhiteSpace((String)Report.GetColumnValue(&quot;SqlEntidade.endereco&quot;))) 
      {
        TxtRodape.Top = TxtEndereco.Top;
        TxtPaginacao.Top = TxtEndereco.Top;
        TxtEndereco.Visible = false;
        BndRodape.Height = (float)15.12; 
      }
      
      TxtRodape.Text = (String)Report.GetColumnValue(&quot;SqlEntidade.sigla&quot;);

      long personalizado = (Int64)Report.GetParameterValue(&quot;personalizado&quot;);
      long imprimirUsuario = (Int64)Report.GetParameterValue(&quot;imprimirUsuario&quot;);
      long imprimirData = (Int64)Report.GetParameterValue(&quot;imprimirData&quot;);

      if (imprimirUsuario == 1)
      {
        TxtRodape.Text += &quot; | &quot; + (String)Report.GetColumnValue(&quot;SqlUsuario.nome&quot;) + (String)Report.GetColumnValue(&quot;SqlUsuario.ds_usuario&quot;);
      }

      if (personalizado == 1)
      {
        TxtRodape.Text += &quot; | PERSONALIZADO&quot;;
      }
      else if (personalizado == 2)
      {
        TxtRodape.Text += &quot; | EXCLUSIVO&quot;;
      }

      if (imprimirData == 1)
      {
        TxtRodape.Text += &quot; | &quot; + (DateTime)Report.GetVariableValue(&quot;Date&quot;);
      }
    }  

    //========================================================================================================================================
   
    private void BndScFluxoMaterial_BeforePrint(object sender, EventArgs e)
    {
      int material = ((Int16)Report.GetColumnValue(&quot;SqlSolicitacaoCompraItem.tp_material&quot;));
      BndScFluxoMaterial.Visible = material &gt; 0;
    }
                                                                                           
    //========================================================================================================================================
  
    private void BndScFluxoServico_BeforePrint(object sender, EventArgs e)
    {
      int material = ((Int16)Report.GetColumnValue(&quot;SqlSolicitacaoCompraItem.tp_material&quot;));
      BndScFluxoServico.Visible = material == 0;
      
    }
        
    //========================================================================================================================================   

  }
}</ScriptText>
  <Dictionary>
    <PostgresDataConnection Name="Connection" ConnectionString="rijcmlqiSaocAniJQNoKNFeaTFzMe98Srvu/H0B5rG99iH0rlAD52+0S9jQVqtbGjnQ1fJfcaegeqkp60BrLd+YLnR4XqyfZaBNherXEOpLePTulRqrY+ChMEL6VHdEuu5eaQq8E+ZDa9Ad9YImM+XDJvP1OxVg6N0Rq7SQYJfDQN9ItQk=">
      <TableDataSource Name="SqlEntidade" Restrictions="DontMove, DontResize, DontModify, DontEdit, DontDelete" DataType="System.Int32" Enabled="true" SelectCommand="select coalesce(enti.ds_entidade, lice.ds_licenciado) as nome&#13;&#10;     , pess.documento_formatado as cnpj&#13;&#10;     , lice.imagem as brasao&#13;&#10;     , coalesce(enti.sigla, lice.sigla) as sigla&#13;&#10;     , enti.imagem as logo&#13;&#10;     , case when enti.id_entidade is not null then ende.endereco end as endereco&#13;&#10;     , fone.contato as telefone&#13;&#10;     , mail.contato as email&#13;&#10;     , site.contato as site&#13;&#10;  from sis_licenciado            lice&#13;&#10;  left join sis_entidade         enti on enti.id_entidade        = :id_entidade&#13;&#10;  left join sis_pessoa           pess on pess.id_pessoa_juridica = enti.id_pessoa_juridica&#13;&#10;  left join sis_pessoa_endereco  ende on ende.id_pessoa          = pess.id_pessoa&#13;&#10;                                     and ende.principal          = 1&#13;&#10;  left join sis_pessoa_contato   fone on fone.id_pessoa          = pess.id_pessoa&#13;&#10;                                     and fone.id_tp_contato      = 2&#13;&#10;                                     and fone.principal          = true&#13;&#10;  left join sis_pessoa_contato   mail on mail.id_pessoa          = pess.id_pessoa&#13;&#10;                                     and mail.id_tp_contato      = 1&#13;&#10;                                     and mail.principal          = true&#13;&#10;  left join sis_pessoa_contato   site on site.id_pessoa          = pess.id_pessoa&#13;&#10;                                     and site.id_tp_contato      = 4&#13;&#10;                                     and site.principal          = true&#13;&#10; limit 1">
        <Column Name="nome" Restrictions="DontMove, DontResize, DontModify, DontEdit, DontDelete" DataType="System.String"/>
        <Column Name="endereco" Restrictions="DontMove, DontResize, DontModify, DontEdit, DontDelete" DataType="System.String"/>
        <Column Name="telefone" Restrictions="DontMove, DontResize, DontModify, DontEdit, DontDelete" DataType="System.String"/>
        <Column Name="cnpj" Restrictions="DontMove, DontResize, DontModify, DontEdit, DontDelete" DataType="System.String"/>
        <Column Name="brasao" Restrictions="DontMove, DontResize, DontModify, DontEdit, DontDelete" DataType="System.Byte[]" BindableControl="Picture"/>
        <Column Name="sigla" Restrictions="DontMove, DontResize, DontModify, DontEdit, DontDelete" DataType="System.String"/>
        <Column Name="logo" Restrictions="DontMove, DontResize, DontModify, DontEdit, DontDelete" DataType="System.Byte[]" BindableControl="Picture"/>
        <Column Name="email" Restrictions="DontMove, DontResize, DontModify, DontEdit, DontDelete" DataType="System.String"/>
        <Column Name="site" Restrictions="DontMove, DontResize, DontModify, DontEdit, DontDelete" DataType="System.String"/>
        <CommandParameter Name="id_entidade" DataType="9" Expression="[idEntidade]"/>
      </TableDataSource>
      <TableDataSource Name="SqlModulo" Restrictions="DontMove, DontResize, DontModify, DontEdit, DontDelete" DataType="System.Int32" Enabled="true" SelectCommand="select a.titulo_1&#13;&#10;     , a.titulo_2&#13;&#10;  from sis_modulo a&#13;&#10; where a.id_modulo = :id_modulo">
        <Column Name="titulo_1" Restrictions="DontMove, DontResize, DontModify, DontEdit, DontDelete" DataType="System.String"/>
        <Column Name="titulo_2" Restrictions="DontMove, DontResize, DontModify, DontEdit, DontDelete" DataType="System.String"/>
        <CommandParameter Name="id_modulo" DataType="9" Expression="[idModulo]"/>
      </TableDataSource>
      <TableDataSource Name="SqlUsuario" Restrictions="DontMove, DontResize, DontModify, DontEdit, DontDelete" DataType="System.Int32" Enabled="true" SelectCommand="select log.nome&#13;&#10;     , case when usu.ds_usuario is not null then ' (' || trim(usu.ds_usuario) || ')' end as ds_usuario &#13;&#10;  from sis_login log &#13;&#10;  left join sis_usuario usu on usu.id_usuario = :id_usuario&#13;&#10; where log.id_login = :id_login&#13;&#10; limit 1">
        <Column Name="ds_usuario" Restrictions="DontMove, DontResize, DontModify, DontEdit, DontDelete" DataType="System.String"/>
        <Column Name="nome" Restrictions="DontMove, DontResize, DontModify, DontEdit, DontDelete" DataType="System.String"/>
        <CommandParameter Name="id_login" DataType="9" Expression="[idLogin]"/>
        <CommandParameter Name="id_usuario" DataType="9" Expression="[idUsuario]"/>
      </TableDataSource>
      <TableDataSource Name="Table3" Alias="SqlSolicitacaoCompraItem" DataType="System.Int32" Enabled="true" SelectCommand="SELECT DISTINCT SCCP.ID_SOLICITACAO_COMPRA&#13;&#10;     , SCCP.NR_SOLICITACAO_COMPRA&#13;&#10;     , SCCP.CP_ANO                  AS ANO_SOLICITACAO_COMPRA&#13;&#10;     , SCCP.TP_SOLICITACAO_COMPRA&#13;&#10;     , SCCP.DT_SOLICITACAO_COMPRA&#13;&#10;     , SCCP.TP_SOLICITACAO&#13;&#10;     , STPS.DS_TP_SOLICITACAO&#13;&#10;     , STPS.SIGLA&#13;&#10;     , SCCP.TP_ENTREGA&#13;&#10;     , STEG.DS_TP_ENTREGA&#13;&#10;     , SCCP.PRAZO_ENTREGA&#13;&#10;     , SCCP.ID_TP_MEDIDA_PRAZO&#13;&#10;     , STMP.DS_TP_MEDIDA_PRAZO&#13;&#10;&#13;&#10;     , USOL.ds_usuario                    AS NOME_SOLICITANTE&#13;&#10;     , USOL.NOME_usuario           AS NOME_COMPLETO_SOLICITANTE&#13;&#10;     , UAPR.ds_usuario                    AS NOME_APROVADOR&#13;&#10;     , UAPR.NOME_usuario           AS NOME_COMPLETO_APROVADOR&#13;&#10;     , SUAD.CD_UNIDADE_ADM&#13;&#10;     , SUAD.DS_UNIDADE_ADM&#13;&#10;     , SCEC.CD_CENTRO_CONSUMO&#13;&#10;     , SCEC.DS_CENTRO_CONSUMO&#13;&#10;     , SCCP.DT_APROVACAO&#13;&#10;     , SCIT.ORDEM&#13;&#10;     , SCIT.ID_COMPRA_ITEM&#13;&#10;     , SMAT.TP_MATERIAL&#13;&#10;     , SGMT.CD_GRUPO                AS CD_SUBGRUPO_MATERIAL&#13;&#10;     , GRMT.CD_GRUPO                AS CD_GRUPO_MATERIAL&#13;&#10;     , SMAT.CD_MATERIAL&#13;&#10;     , SMAT.DS_MATERIAL&#13;&#10;     , SMAT.UN_MATERIAL&#13;&#10;     , GRSV.CD_GRUPO_SERVICO            AS CD_GRUPO_SERVICO&#13;&#10;     , GRSV.DS_GRUPO_SERVICO            AS DS_GRUPO_SERVICO&#13;&#10;     , SGSV.CD_GRUPO_SERVICO            AS CD_SUBGRUPO_SERVICO&#13;&#10;     , SGSV.DS_GRUPO_SERVICO            AS DS_SUBGRUPO_SERVICO&#13;&#10;     , SCIT.UN_SERVICO&#13;&#10;     , COALESCE(SPAR.APROV_FINANCEIRA,0)  AS UTILIZA_APROV_FIN&#13;&#10;     , COALESCE(SPAR.UTILIZA_COMP    ,0)  AS UTILIZA_DEF_COMPRADOR&#13;&#10;  FROM SUP_COMPRA_ITEM                      SCIT&#13;&#10;       LEFT JOIN SUP_MATERIAL               SMAT ON SMAT.ID_MATERIAL            = SCIT.ID_MATERIAL&#13;&#10;       LEFT JOIN SUP_GRUPO                  SGMT ON SGMT.ID_GRUPO               = SMAT.ID_GRUPO&#13;&#10;       LEFT JOIN SUP_GRUPO                  GRMT ON GRMT.ID_GRUPO               = SGMT.ID_GRUPO_PAI&#13;&#10;       LEFT JOIN SUP_GRUPO_SERVICO          SGSV ON SGSV.ID_GRUPO_SERVICO       = SCIT.ID_GRUPO_SERVICO&#13;&#10;       LEFT JOIN SUP_GRUPO_SERVICO          GRSV ON GRSV.ID_GRUPO_SERVICO       = SGSV.ID_GRUPO_SERVICO_PAI &#13;&#10;       LEFT JOIN SUP_SOLICITACAO_COMPRA     SCCP ON SCCP.ID_SOLICITACAO_COMPRA  = SCIT.ID_SOLICITACAO_COMPRA&#13;&#10;       LEFT JOIN SUP_CENTRO_CONSUMO         SCEC ON SCEC.ID_CENTRO_CONSUMO      = SCCP.ID_CENTRO_CONSUMO&#13;&#10;       LEFT JOIN SUP_UNIDADE_ADM            SUAD ON SUAD.ID_UNIDADE_ADM         = SCEC.ID_UNIDADE_ADM&#13;&#10;       LEFT JOIN sis_USUARIO                USOL ON USOL.id_usuario             = SCCP.ID_SOLICITANTE&#13;&#10;       LEFT JOIN sis_USUARIO                UAPR ON UAPR.id_usuario             = SCCP.ID_APROVADOR&#13;&#10;       LEFT JOIN SUP_TP_SOLICITACAO_COMPRA  STSC ON STSC.TP_SOLICITACAO_COMPRA  = SCCP.TP_SOLICITACAO_COMPRA&#13;&#10;       LEFT JOIN SUP_ST_SOLICITACAO_COMPRA  SSSC ON SSSC.ST_SOLICITACAO_COMPRA  = SCCP.ST_SOLICITACAO_COMPRA&#13;&#10;       LEFT JOIN SUP_TP_SOLICITACAO         STPS ON STPS.TP_SOLICITACAO         = SCCP.TP_SOLICITACAO&#13;&#10;       LEFT JOIN SUP_TP_ENTREGA             STEG ON STEG.TP_ENTREGA             = SCCP.TP_ENTREGA&#13;&#10;       LEFT JOIN SUP_TP_MEDIDA_PRAZO        STMP ON STMP.ID_TP_MEDIDA_PRAZO     = SCCP.ID_TP_MEDIDA_PRAZO&#13;&#10;       LEFT JOIN SUP_PARAMETRO              SPAR ON SPAR.id_entidade = :ENTIDADE&#13;&#10;&#13;&#10; WHERE SCIT.ID_COMPRA_ITEM = :ID_COMPRA_ITEM">
        <Column Name="id_solicitacao_compra" DataType="System.Int32"/>
        <Column Name="nr_solicitacao_compra" DataType="System.Int32"/>
        <Column Name="ano_solicitacao_compra" DataType="System.Int16"/>
        <Column Name="tp_solicitacao_compra" DataType="System.Int16"/>
        <Column Name="dt_solicitacao_compra" DataType="System.DateTime"/>
        <Column Name="tp_solicitacao" DataType="System.Int16"/>
        <Column Name="ds_tp_solicitacao" DataType="System.String"/>
        <Column Name="sigla" DataType="System.String"/>
        <Column Name="tp_entrega" DataType="System.Int16"/>
        <Column Name="ds_tp_entrega" DataType="System.String"/>
        <Column Name="prazo_entrega" DataType="System.Int16"/>
        <Column Name="id_tp_medida_prazo" DataType="System.Int32"/>
        <Column Name="ds_tp_medida_prazo" DataType="System.String"/>
        <Column Name="nome_solicitante" DataType="System.String"/>
        <Column Name="nome_completo_solicitante" DataType="System.String"/>
        <Column Name="nome_aprovador" DataType="System.String"/>
        <Column Name="nome_completo_aprovador" DataType="System.String"/>
        <Column Name="cd_unidade_adm" DataType="System.Int32"/>
        <Column Name="ds_unidade_adm" DataType="System.String"/>
        <Column Name="cd_centro_consumo" DataType="System.Int32"/>
        <Column Name="ds_centro_consumo" DataType="System.String"/>
        <Column Name="dt_aprovacao" DataType="System.DateTime"/>
        <Column Name="ordem" DataType="System.Int16"/>
        <Column Name="id_compra_item" DataType="System.Int32"/>
        <Column Name="tp_material" DataType="System.Int16"/>
        <Column Name="cd_subgrupo_material" DataType="System.Int32"/>
        <Column Name="cd_grupo_material" DataType="System.Int32"/>
        <Column Name="cd_material" DataType="System.Int32"/>
        <Column Name="ds_material" DataType="System.String"/>
        <Column Name="un_material" DataType="System.String"/>
        <Column Name="cd_grupo_servico" DataType="System.Int32"/>
        <Column Name="ds_grupo_servico" DataType="System.String"/>
        <Column Name="cd_subgrupo_servico" DataType="System.Int32"/>
        <Column Name="ds_subgrupo_servico" DataType="System.String"/>
        <Column Name="un_servico" DataType="System.String"/>
        <Column Name="utiliza_aprov_fin" DataType="System.Int32"/>
        <Column Name="utiliza_def_comprador" DataType="System.Int32"/>
        <CommandParameter Name="ENTIDADE" DataType="9" Expression="[identidade]"/>
        <CommandParameter Name="id_compra_item" DataType="9" Expression="[idCompraItem]"/>
      </TableDataSource>
      <TableDataSource Name="Table4" Alias="SqlFluxo" DataType="System.Int32" Enabled="true" SelectCommand="SELECT CASE WHEN A.TP_SOLICITACAO = 0 --TP_SOLICITACAO_NORMAL&#13;&#10;            THEN 0&#13;&#10;            ELSE 1&#13;&#10;       END AS TP_ETAPA&#13;&#10;     , CAST('SC - Solicitada' AS VARCHAR(40)) AS DS_ETAPA&#13;&#10;     , C.DT_HISTORICO_SCOMPRA AS DATA&#13;&#10;     , H.DS_USUARIO   AS NOME&#13;&#10;     , H.NOME_usuario AS NOME_COMPLETO&#13;&#10;     , CAST('' AS VARCHAR(1000)) AS JUSTIFICATIVA&#13;&#10;     , CASE WHEN A.TP_SOLICITACAO = 0 --TP_SOLICITACAO_NORMAL&#13;&#10;            THEN 0&#13;&#10;            ELSE D.NR_PROCESSO_COMPRA&#13;&#10;       END AS NR_DOCUMENTO&#13;&#10;     , CASE WHEN A.TP_SOLICITACAO = 0 --TP_SOLICITACAO_NORMAL&#13;&#10;            THEN 0&#13;&#10;            ELSE D.ANO_PROCESSO_COMPRA&#13;&#10;       END AS ANO_DOCUMENTO&#13;&#10;     , B.QTD&#13;&#10;     , B.VL_TOTAL&#13;&#10;  FROM SUP_COMPRA_ITEM B&#13;&#10;       INNER JOIN SUP_HISTORICO_SCOMPRA   C ON C.ID_SOLICITACAO_COMPRA  = B.ID_SOLICITACAO_COMPRA&#13;&#10;       INNER JOIN SUP_SOLICITACAO_COMPRA  A ON A.ID_SOLICITACAO_COMPRA  = B.ID_SOLICITACAO_COMPRA&#13;&#10;       LEFT  JOIN sis_USUARIO             H ON H.id_usuario             = C.ID_USUARIO--A.ID_SOLICITANTE                   &#13;&#10;       LEFT  JOIN SUP_PROCESSO_COMPRA     D ON D.ID_PROCESSO_COMPRA     = A.ID_PROCESSO_COMPRA&#13;&#10; WHERE B.ID_COMPRA_ITEM        = :ID_COMPRA_ITEM&#13;&#10;   AND C.ST_SOLICITACAO_COMPRA = 0 --st_aberto&#13;&#10;&#13;&#10;UNION ALL&#13;&#10;&#13;&#10;SELECT 0 AS TP_ETAPA&#13;&#10;     , CAST('SC - Liberada' AS VARCHAR(40)) AS DS_ETAPA&#13;&#10;     , C.DT_HISTORICO_SCOMPRA AS DATA&#13;&#10;     , H.DS_USUARIO   AS NOME&#13;&#10;     , H.NOME_usuario AS NOME_COMPLETO&#13;&#10;     , CAST('' AS VARCHAR(1000)) AS JUSTIFICATIVA&#13;&#10;     , 0 AS NR_DOCUMENTO&#13;&#10;     , 0 AS ANO_DOCUMENTO&#13;&#10;     , B.QTD&#13;&#10;     , B.VL_TOTAL&#13;&#10;  FROM SUP_COMPRA_ITEM B&#13;&#10;       INNER JOIN SUP_HISTORICO_SCOMPRA   C ON C.ID_SOLICITACAO_COMPRA  = B.ID_SOLICITACAO_COMPRA&#13;&#10;       INNER JOIN SUP_SOLICITACAO_COMPRA  A ON A.ID_SOLICITACAO_COMPRA  = B.ID_SOLICITACAO_COMPRA&#13;&#10;       LEFT  JOIN sis_USUARIO             H ON H.id_usuario             = C.ID_USUARIO--A.ID_SOLICITANTE&#13;&#10; WHERE B.ID_COMPRA_ITEM = :ID_COMPRA_ITEM&#13;&#10;   AND C.ST_SOLICITACAO_COMPRA = 1 --st_liberado&#13;&#10;&#13;&#10;UNION ALL&#13;&#10;&#13;&#10;SELECT DISTINCT 0 AS TP_ETAPA&#13;&#10;     , CAST('SC - Aprovada' AS VARCHAR(40)) AS DS_ETAPA&#13;&#10;     , C.DT_HISTORICO_SCOMPRA AS DATA&#13;&#10;     , H.DS_USUARIO   AS NOME&#13;&#10;     , H.NOME_usuario AS NOME_COMPLETO&#13;&#10;     , CAST('' AS VARCHAR(1000)) AS JUSTIFICATIVA&#13;&#10;     , 0 AS NR_DOCUMENTO&#13;&#10;     , 0 AS ANO_DOCUMENTO&#13;&#10;     , B.QTD&#13;&#10;     , B.VL_TOTAL&#13;&#10;  FROM SUP_COMPRA_ITEM B&#13;&#10;       INNER JOIN SUP_HISTORICO_SCOMPRA   C ON C.ID_SOLICITACAO_COMPRA  = B.ID_SOLICITACAO_COMPRA&#13;&#10;       INNER JOIN SUP_SOLICITACAO_COMPRA  A ON A.ID_SOLICITACAO_COMPRA  = B.ID_SOLICITACAO_COMPRA&#13;&#10;     --  LEFT  JOIN AAC_USUARIOS            H ON H.CODIGO_USUARIO         = A.ID_APROVADOR&#13;&#10;       LEFT  JOIN sis_USUARIO            H ON H.id_usuario              = C.ID_USUARIO AND C.ST_SOLICITACAO_COMPRA = 3                                                                                                                &#13;&#10; WHERE B.ID_COMPRA_ITEM = :ID_COMPRA_ITEM&#13;&#10;   AND C.ST_SOLICITACAO_COMPRA = 3 --st_aprovado&#13;&#10;&#13;&#10;UNION ALL&#13;&#10;&#13;&#10;SELECT 0 AS TP_ETAPA&#13;&#10;     , CAST('SC - Reprovada' AS VARCHAR(40)) AS DS_ETAPA&#13;&#10;     , C.DT_HISTORICO_SCOMPRA AS DATA&#13;&#10;     , H.DS_USUARIO   AS NOME&#13;&#10;     , H.NOME_usuario AS NOME_COMPLETO&#13;&#10;     , CAST('' AS VARCHAR(1000))  AS JUSTIFICATIVA&#13;&#10;     , 0 AS NR_DOCUMENTO&#13;&#10;     , 0 AS ANO_DOCUMENTO&#13;&#10;     , B.QTD&#13;&#10;     , B.VL_TOTAL&#13;&#10;  FROM SUP_COMPRA_ITEM B&#13;&#10;       INNER JOIN SUP_HISTORICO_SCOMPRA   C ON C.ID_SOLICITACAO_COMPRA  = B.ID_SOLICITACAO_COMPRA&#13;&#10;       INNER JOIN SUP_SOLICITACAO_COMPRA  A ON A.ID_SOLICITACAO_COMPRA  = B.ID_SOLICITACAO_COMPRA&#13;&#10;       LEFT  JOIN sis_USUARIO             H ON H.id_usuario             = A.ID_APROVADOR&#13;&#10; WHERE B.ID_COMPRA_ITEM = :ID_COMPRA_ITEM&#13;&#10;   AND C.ST_SOLICITACAO_COMPRA = 4 --st_reprovado&#13;&#10;&#13;&#10;UNION ALL&#13;&#10;&#13;&#10;SELECT 0 AS TP_ETAPA&#13;&#10;     , CAST('Aprovação financeira - aprovado' AS VARCHAR(40)) AS DS_ETAPA&#13;&#10;     , C.DT_HISTORICO_COMPRA_IT AS DATA&#13;&#10;     , D.DS_USUARIO AS NOME&#13;&#10;     , D.NOME_USUARIO AS NOME_COMPLETO&#13;&#10;     , CAST('' AS VARCHAR(1000))  AS JUSTIFICATIVA&#13;&#10;     , 0 AS NR_DOCUMENTO&#13;&#10;     , 0 AS ANO_DOCUMENTO&#13;&#10;     , B.QTD&#13;&#10;     , B.VL_TOTAL&#13;&#10;  FROM SUP_COMPRA_ITEM B&#13;&#10;       INNER JOIN SUP_HISTORICO_COMPRA_IT C ON C.ID_COMPRA_ITEM         = B.ID_COMPRA_ITEM&#13;&#10;       INNER JOIN SUP_SOLICITACAO_COMPRA  A ON A.ID_SOLICITACAO_COMPRA  = B.ID_SOLICITACAO_COMPRA&#13;&#10;       LEFT  JOIN SIS_USUARIO             D ON D.id_usuario             = C.ID_USUARIO&#13;&#10; WHERE B.ID_COMPRA_ITEM = :ID_COMPRA_ITEM&#13;&#10;   AND C.ST_COMPRA_ITEM = 2 -- ST_COMPRA_ITEM_LIBERADO_DOT&#13;&#10;  AND 1 = :UTILIZA_APROV_FIN&#13;&#10;&#13;&#10;UNION ALL&#13;&#10;&#13;&#10;SELECT 0 AS TP_ETAPA&#13;&#10;     , CAST('Aprovação financeira - reprovado' AS VARCHAR(40)) AS DS_ETAPA&#13;&#10;     , C.DT_HISTORICO_COMPRA_IT AS DATA&#13;&#10;     , D.ds_usuario AS NOME&#13;&#10;     , D.NOME_usuario AS NOME_COMPLETO&#13;&#10;     , CAST(C.JUSTIFICATIVA AS VARCHAR(1000))  AS JUSTIFICATIVA&#13;&#10;     , 0 AS NR_DOCUMENTO&#13;&#10;     , 0 AS ANO_DOCUMENTO&#13;&#10;     , B.QTD&#13;&#10;     , B.VL_TOTAL&#13;&#10;  FROM SUP_COMPRA_ITEM B&#13;&#10;       INNER JOIN SUP_HISTORICO_COMPRA_IT C ON C.ID_COMPRA_ITEM         = B.ID_COMPRA_ITEM&#13;&#10;       INNER JOIN SUP_SOLICITACAO_COMPRA  A ON A.ID_SOLICITACAO_COMPRA  = B.ID_SOLICITACAO_COMPRA&#13;&#10;       LEFT  JOIN sis_USUARIO             D ON D.id_usuario             = C.ID_USUARIO&#13;&#10; WHERE B.ID_COMPRA_ITEM = :ID_COMPRA_ITEM&#13;&#10;   AND C.ST_COMPRA_ITEM = 3 --ST_COMPRA_ITEM_NAO_LIBERADO_DOT&#13;&#10;   AND 1 = :UTILIZA_APROV_FIN&#13;&#10;&#13;&#10;UNION ALL&#13;&#10;&#13;&#10;SELECT 0 AS TP_ETAPA&#13;&#10;     , CAST('Definição de dotação - liberado' AS VARCHAR(40)) AS DS_ETAPA&#13;&#10;     , C.DT_HISTORICO_COMPRA_IT AS DATA&#13;&#10;     , D.ds_usuario AS NOME&#13;&#10;     , D.nome_usuario AS NOME_COMPLETO&#13;&#10;     , CAST('' AS VARCHAR(1000))  AS JUSTIFICATIVA&#13;&#10;     , 0 AS NR_DOCUMENTO&#13;&#10;     , 0 AS ANO_DOCUMENTO&#13;&#10;     , B.QTD&#13;&#10;     , B.VL_TOTAL&#13;&#10;  FROM SUP_COMPRA_ITEM B&#13;&#10;       INNER JOIN SUP_SOLICITACAO_COMPRA  A ON A.ID_SOLICITACAO_COMPRA  = B.ID_SOLICITACAO_COMPRA&#13;&#10;       INNER JOIN SUP_HISTORICO_COMPRA_IT C ON C.ID_COMPRA_ITEM         = B.ID_COMPRA_ITEM&#13;&#10;       LEFT  JOIN sis_USUARIO             D ON D.id_usuario             = C.ID_USUARIO&#13;&#10; WHERE B.ID_COMPRA_ITEM = :ID_COMPRA_ITEM&#13;&#10;   AND CASE WHEN (0 = :UTILIZA_DEF_COMPRADOR OR A.TP_SOLICITACAO &lt;&gt; 0 ) --TP_SOLICITACAO_NORMAL&#13;&#10;            THEN 4 --ST_COMPRA_ITEM_LIBERADO_COMPRA&#13;&#10;            ELSE 8 --ST_COMPRA_ITEM_LIB_LIBERACAO&#13;&#10;       END = C.ST_COMPRA_ITEM&#13;&#10;&#13;&#10;UNION ALL&#13;&#10;&#13;&#10;SELECT 0 AS TP_ETAPA&#13;&#10;     , CAST('Definição de dotação - não liberado' AS VARCHAR(40)) AS DS_ETAPA&#13;&#10;     , C.DT_HISTORICO_COMPRA_IT AS DATA&#13;&#10;     , d.ds_usuario AS NOME&#13;&#10;     , D.nome_usuario AS NOME_COMPLETO&#13;&#10;     , CAST(C.JUSTIFICATIVA AS VARCHAR(1000))  AS JUSTIFICATIVA&#13;&#10;     , 0 AS NR_DOCUMENTO&#13;&#10;     , 0 AS ANO_DOCUMENTO&#13;&#10;     , B.QTD&#13;&#10;     , B.VL_TOTAL&#13;&#10;  FROM SUP_COMPRA_ITEM B&#13;&#10;       INNER JOIN SUP_SOLICITACAO_COMPRA  A ON A.ID_SOLICITACAO_COMPRA  = B.ID_SOLICITACAO_COMPRA&#13;&#10;       INNER JOIN SUP_HISTORICO_COMPRA_IT C ON C.ID_COMPRA_ITEM         = B.ID_COMPRA_ITEM&#13;&#10;       LEFT  JOIN sis_USUARIO             D ON D.id_usuario             = C.ID_USUARIO&#13;&#10; WHERE B.ID_COMPRA_ITEM = :ID_COMPRA_ITEM&#13;&#10;   AND CASE WHEN (0 = :UTILIZA_DEF_COMPRADOR OR A.TP_SOLICITACAO &lt;&gt; 0 ) --TP_SOLICITACAO_NORMAL&#13;&#10;            THEN 5 --ST_COMPRA_ITEM_NAO_LIBERADO_COMPRA&#13;&#10;            ELSE 9 --ST_COMPRA_ITEM_NAO_LIB_LIBERACAO&#13;&#10;       END = C.ST_COMPRA_ITEM&#13;&#10;&#13;&#10;UNION ALL&#13;&#10;&#13;&#10;SELECT 0 AS TP_ETAPA&#13;&#10;     , CAST('Autorização de compra - liberado' AS VARCHAR(40)) AS DS_ETAPA&#13;&#10;     , C.DT_HISTORICO_COMPRA_IT AS DATA&#13;&#10;     , D.ds_usuario AS NOME&#13;&#10;     , D.NOME_usuario AS NOME_COMPLETO&#13;&#10;     , CAST('' AS VARCHAR(1000))  AS JUSTIFICATIVA&#13;&#10;     , 0 AS NR_DOCUMENTO&#13;&#10;     , 0 AS ANO_DOCUMENTO&#13;&#10;     , B.QTD&#13;&#10;     , B.VL_TOTAL&#13;&#10;  FROM SUP_COMPRA_ITEM B&#13;&#10;       INNER JOIN SUP_SOLICITACAO_COMPRA  A ON A.ID_SOLICITACAO_COMPRA  = B.ID_SOLICITACAO_COMPRA&#13;&#10;       INNER JOIN SUP_HISTORICO_COMPRA_IT C ON C.ID_COMPRA_ITEM         = B.ID_COMPRA_ITEM&#13;&#10;       LEFT  JOIN sis_USUARIO             D ON D.id_usuario             = C.ID_USUARIO&#13;&#10; WHERE B.ID_COMPRA_ITEM = :ID_COMPRA_ITEM&#13;&#10;   AND C.ST_COMPRA_ITEM = 4--ST_COMPRA_ITEM_LIBERADO_COMPRA&#13;&#10;   AND 1 = :UTILIZA_DEF_COMPRADOR&#13;&#10;   AND A.TP_SOLICITACAO = 0 --TP_SOLICITACAO_NORMAL&#13;&#10;&#13;&#10;UNION ALL&#13;&#10;&#13;&#10;SELECT 0 AS TP_ETAPA&#13;&#10;     , CAST('Autorização de compra - não liberado' AS VARCHAR(40)) AS DS_ETAPA&#13;&#10;     , C.DT_HISTORICO_COMPRA_IT AS DATA&#13;&#10;     , D.ds_usuario AS NOME&#13;&#10;     , D.NOME_usuario AS NOME_COMPLETO&#13;&#10;     , CAST(C.JUSTIFICATIVA AS VARCHAR(1000))  AS JUSTIFICATIVA&#13;&#10;     , 0 AS NR_DOCUMENTO&#13;&#10;     , 0 AS ANO_DOCUMENTO&#13;&#10;     , B.QTD&#13;&#10;     , B.VL_TOTAL&#13;&#10;  FROM SUP_COMPRA_ITEM B&#13;&#10;       INNER JOIN SUP_SOLICITACAO_COMPRA  A ON A.ID_SOLICITACAO_COMPRA  = B.ID_SOLICITACAO_COMPRA&#13;&#10;       INNER JOIN SUP_HISTORICO_COMPRA_IT C ON C.ID_COMPRA_ITEM         = B.ID_COMPRA_ITEM&#13;&#10;       LEFT  JOIN sis_USUARIO             D ON D.id_usuario         = C.ID_USUARIO&#13;&#10; WHERE B.ID_COMPRA_ITEM = :ID_COMPRA_ITEM&#13;&#10;   AND C.ST_COMPRA_ITEM = 5 --ST_COMPRA_ITEM_NAO_LIBERADO_COMPRA&#13;&#10;   AND 1 = :UTILIZA_DEF_COMPRADOR&#13;&#10;   AND A.TP_SOLICITACAO = 0 --TP_SOLICITACAO_NORMAL&#13;&#10;&#13;&#10;UNION ALL&#13;&#10;&#13;&#10;SELECT 0 AS TP_ETAPA&#13;&#10;     , CAST('Definição de comprador - definido' AS VARCHAR(40)) AS DS_ETAPA&#13;&#10;     , H.DT_COMPRA_ITEM_ID AS DATA&#13;&#10;     , I.ds_usuario   AS NOME&#13;&#10;     , I.NOME_usuario AS NOME_COMPLETO&#13;&#10;     , CAST('' AS VARCHAR(1000))  AS JUSTIFICATIVA&#13;&#10;     , 0 AS NR_DOCUMENTO&#13;&#10;     , 0 AS ANO_DOCUMENTO&#13;&#10;     , B.QTD&#13;&#10;     , B.VL_TOTAL&#13;&#10;  FROM SUP_COMPRA_ITEM B&#13;&#10;       INNER JOIN SUP_SOLICITACAO_COMPRA  A ON A.ID_SOLICITACAO_COMPRA  = B.ID_SOLICITACAO_COMPRA&#13;&#10;       INNER JOIN SUP_COMPRA_ITEM_ID      H ON H.ID_COMPRA_ITEM_ID      = B.ID_COMPRA_ITEM_ID&#13;&#10;       LEFT  JOIN sis_USUARIO             I ON I.id_usuario            = H.ID_USUARIO&#13;&#10; WHERE B.ID_COMPRA_ITEM = :ID_COMPRA_ITEM&#13;&#10;&#13;&#10;UNION ALL&#13;&#10;&#13;&#10;SELECT 0 AS TP_ETAPA&#13;&#10;     , CAST('Definição de comprador - não definido' AS VARCHAR(40)) AS DS_ETAPA&#13;&#10;     , C.DT_HISTORICO_COMPRA_IT AS DATA&#13;&#10;     , D.ds_usuario AS NOME&#13;&#10;     , D.NOME_usuario AS NOME_COMPLETO&#13;&#10;     , CAST(C.JUSTIFICATIVA AS VARCHAR(1000))  AS JUSTIFICATIVA&#13;&#10;     , 0 AS NR_DOCUMENTO&#13;&#10;     , 0 AS ANO_DOCUMENTO&#13;&#10;     , B.QTD&#13;&#10;     , B.VL_TOTAL&#13;&#10;  FROM SUP_COMPRA_ITEM B&#13;&#10;       INNER JOIN SUP_SOLICITACAO_COMPRA  A ON A.ID_SOLICITACAO_COMPRA  = B.ID_SOLICITACAO_COMPRA&#13;&#10;       INNER JOIN SUP_HISTORICO_COMPRA_IT C ON C.ID_COMPRA_ITEM         = B.ID_COMPRA_ITEM&#13;&#10;       LEFT  JOIN sis_USUARIO             D ON D.id_usuario         = C.ID_USUARIO&#13;&#10; WHERE B.ID_COMPRA_ITEM = :ID_COMPRA_ITEM&#13;&#10;   AND C.ST_COMPRA_ITEM = 10--ST_COMPRA_ITEM_RECUSADO_DEF_COMP&#13;&#10;&#13;&#10;UNION ALL&#13;&#10;&#13;&#10;SELECT 1 AS TP_ETAPA&#13;&#10;     , CAST('Em processo de compra' AS VARCHAR(40)) AS DS_ETAPA&#13;&#10;     , C.DT_HISTORICO_COMPRA_IT AS DATA&#13;&#10;     , D.ds_usuario AS NOME&#13;&#10;     , D.NOME_usuario AS NOME_COMPLETO&#13;&#10;     , CAST('' AS VARCHAR(1000))  AS JUSTIFICATIVA&#13;&#10;     , F.NR_PROCESSO_COMPRA AS NR_DOCUMENTO&#13;&#10;     , F.ANO_PROCESSO_COMPRA AS ANO_DOCUMENTO&#13;&#10;     , B.QTD&#13;&#10;     , B.VL_TOTAL&#13;&#10;  FROM SUP_COMPRA_ITEM B&#13;&#10;       INNER JOIN SUP_SOLICITACAO_COMPRA  A ON A.ID_SOLICITACAO_COMPRA  = B.ID_SOLICITACAO_COMPRA&#13;&#10;       INNER JOIN SUP_HISTORICO_COMPRA_IT C ON C.ID_COMPRA_ITEM         = B.ID_COMPRA_ITEM&#13;&#10;       LEFT  JOIN sis_USUARIO             D ON D.id_usuario             = C.ID_USUARIO&#13;&#10;       LEFT  JOIN SUP_PROC_COMPRA_ITEM    E ON E.ID_PROC_COMPRA_ITEM    = B.ID_PROC_COMPRA_ITEM&#13;&#10;       LEFT  JOIN SUP_PROCESSO_COMPRA     F ON F.ID_PROCESSO_COMPRA     = E.ID_PROCESSO_COMPRA&#13;&#10; WHERE B.ID_COMPRA_ITEM = :ID_COMPRA_ITEM&#13;&#10;   AND A.TP_SOLICITACAO = 0 --TP_SOLICITACAO_NORMAL&#13;&#10;   AND C.ST_COMPRA_ITEM = 7 --ST_COMPRA_ITEM_EM_PROCESSO&#13;&#10;&#13;&#10;UNION ALL&#13;&#10;&#13;&#10;SELECT 0 AS TP_ETAPA&#13;&#10;     , CAST('Recusado pelo comprador' AS VARCHAR(40)) AS DS_ETAPA&#13;&#10;     , C.DT_HISTORICO_COMPRA_IT AS DATA&#13;&#10;     , D.ds_usuario AS NOME&#13;&#10;     , D.NOME_usuario AS NOME_COMPLETO&#13;&#10;     , CAST(C.JUSTIFICATIVA AS VARCHAR(1000))  AS JUSTIFICATIVA&#13;&#10;     , 0 AS NR_DOCUMENTO&#13;&#10;     , 0 AS ANO_DOCUMENTO&#13;&#10;     , B.QTD&#13;&#10;     , B.VL_TOTAL&#13;&#10;  FROM SUP_COMPRA_ITEM B&#13;&#10;       INNER JOIN SUP_SOLICITACAO_COMPRA  A ON A.ID_SOLICITACAO_COMPRA  = B.ID_SOLICITACAO_COMPRA&#13;&#10;       INNER JOIN SUP_HISTORICO_COMPRA_IT C ON C.ID_COMPRA_ITEM         = B.ID_COMPRA_ITEM&#13;&#10;       LEFT  JOIN sis_USUARIO             D ON D.id_usuario             = C.ID_USUARIO&#13;&#10; WHERE B.ID_COMPRA_ITEM = :ID_COMPRA_ITEM&#13;&#10;   AND C.ST_COMPRA_ITEM = 6 --ST_COMPRA_ITEM_RECUSADO&#13;&#10;&#13;&#10;UNION ALL&#13;&#10;&#13;&#10;SELECT 0 AS TP_ETAPA&#13;&#10;     , CAST('Ratificado/adjudicado' AS VARCHAR(40)) AS DS_ETAPA&#13;&#10;     , CASE WHEN H.TP_SOLICITACAO = 0 --TP_SOLICITACAO_NORMAL&#13;&#10;            THEN C.DT_RATIFICACAO&#13;&#10;            ELSE E.DT_RATIFICACAO&#13;&#10;       END AS DATA&#13;&#10;     , CASE WHEN H.TP_SOLICITACAO = 0 --TP_SOLICITACAO_NORMAL&#13;&#10;            THEN D.ds_usuario&#13;&#10;            ELSE F.ds_usuario&#13;&#10;       END AS NOME&#13;&#10;     , CASE WHEN H.TP_SOLICITACAO = 0 --TP_SOLICITACAO_NORMAL&#13;&#10;            THEN D.NOME_usuario&#13;&#10;            ELSE F.NOME_usuario&#13;&#10;       END AS NOME_COMPLETO&#13;&#10;     , CAST('' AS VARCHAR(1000))  AS JUSTIFICATIVA&#13;&#10;     , 0 AS NR_DOCUMENTO&#13;&#10;     , 0 AS ANO_DOCUMENTO&#13;&#10;     , G.QTD&#13;&#10;     , G.VL_TOTAL&#13;&#10;  FROM SUP_RATIF_FICHA_DADOS A&#13;&#10;       LEFT JOIN SUP_RATIF_FICHA        B ON B.ID_RATIF_FICHA_DADOS   = A.ID_RATIF_FICHA_DADOS&#13;&#10;       LEFT JOIN SUP_RATIF_ITEM_HIST    C ON C.ID_RATIF_ITEM          = B.ID_RATIF_ITEM&#13;&#10;                                         AND C.ID_RATIF_ITEM_HIST     = (SELECT A3.ID_RATIF_ITEM_HIST&#13;&#10;                                                                           FROM SUP_RATIF_ITEM_HIST A3&#13;&#10;                                                                          WHERE A3.ID_RATIF_ITEM = B.ID_RATIF_ITEM&#13;&#10;                                                                          LIMIT 1)&#13;&#10;       LEFT JOIN sis_USUARIO            D ON D.id_usuario             = C.ID_USUARIO&#13;&#10;       LEFT JOIN SUP_RATIF_FICHA_HIST   E ON E.ID_RATIF_FICHA         = B.ID_RATIF_FICHA AND E.ID_RATIF_FICHA_DADOS = B.ID_RATIF_FICHA_DADOS&#13;&#10;                                         AND E.ID_RATIF_FICHA_HIST    = (SELECT A4.ID_RATIF_FICHA_HIST&#13;&#10;                                                                           FROM SUP_RATIF_FICHA_HIST A4&#13;&#10;                                                                          WHERE A4.ID_RATIF_FICHA = B.ID_RATIF_FICHA&#13;&#10;                                                                            AND A4.ID_RATIF_FICHA_DADOS = B.ID_RATIF_FICHA_DADOS&#13;&#10;                                                                            LIMIT 1)&#13;&#10;       LEFT JOIN sis_USUARIO            F ON F.id_usuario             = E.ID_USUARIO&#13;&#10;       LEFT JOIN SUP_COMPRA_ITEM        G ON G.ID_COMPRA_ITEM         = A.ID_COMPRA_ITEM&#13;&#10;       LEFT JOIN SUP_SOLICITACAO_COMPRA H ON H.ID_SOLICITACAO_COMPRA  = G.ID_SOLICITACAO_COMPRA&#13;&#10; WHERE A.ID_COMPRA_ITEM = :ID_COMPRA_ITEM&#13;&#10;   AND H.TP_SOLICITACAO IN (0, 2) -- (TP_SOLICITACAO_NORMAL, TP_SOLICITACAO_ADITAMENTO)&#13;&#10; GROUP BY&#13;&#10;       A.ID_COMPRA_ITEM,&#13;&#10;       H.TP_SOLICITACAO,&#13;&#10;       C.DT_RATIFICACAO,&#13;&#10;       E.DT_RATIFICACAO,&#13;&#10;       D.ds_usuario,&#13;&#10;       F.ds_usuario,&#13;&#10;       D.NOME_usuario,&#13;&#10;       F.NOME_usuario,&#13;&#10;       C.VL_TOTAL,&#13;&#10;       G.QTD,&#13;&#10;       G.VL_TOTAL&#13;&#10;&#13;&#10;UNION ALL&#13;&#10;&#13;&#10;SELECT 0 AS TP_ETAPA&#13;&#10;     , CAST('Anulado' AS VARCHAR(40)) AS DS_ETAPA&#13;&#10;     , B.DT_ANULACAO AS DATA&#13;&#10;     , C.ds_usuario   AS NOME&#13;&#10;     , C.NOME_usuario AS NOME_COMPLETO&#13;&#10;     , CAST(B.JUSTIFICATIVA_ANULACAO AS VARCHAR(1000))  AS JUSTIFICATIVA&#13;&#10;     , 0 AS NR_DOCUMENTO&#13;&#10;     , 0 AS ANO_DOCUMENTO&#13;&#10;     , A.QTD&#13;&#10;     , A.VL_TOTAL&#13;&#10;  FROM SUP_COMPRA_ITEM A&#13;&#10;       INNER JOIN SUP_PROC_COMPRA_ITEM  B ON B.ID_PROC_COMPRA_ITEM  = A.ID_PROC_COMPRA_ITEM&#13;&#10;       LEFT  JOIN sis_USUARIO           C ON C.id_usuario           = B.ID_USUARIO_ANULACAO&#13;&#10; WHERE A.ID_COMPRA_ITEM = :ID_COMPRA_ITEM&#13;&#10;   AND B.ANULADO = 1&#13;&#10;&#13;&#10;UNION ALL&#13;&#10;&#13;&#10;SELECT 2 AS TP_ETAPA&#13;&#10;     , CAST('Solicitação de empenho - solicitado' AS VARCHAR(40)) AS DS_ETAPA&#13;&#10;     , E.DT_SOLICITACAO AS DATA&#13;&#10;     , F.ds_usuario   AS NOME&#13;&#10;     , F.NOME_usuario AS NOME_COMPLETO&#13;&#10;     , CAST('' AS VARCHAR(1000))  AS JUSTIFICATIVA&#13;&#10;     , E.NR_SOLIC_EMPENHO AS NR_DOCUMENTO&#13;&#10;     , E.CP_ANO AS ANO_DOCUMENTO&#13;&#10;     , SUM(C.QTD) AS QTD&#13;&#10;     , SUM(C.VALOR) AS VALOR&#13;&#10;  FROM SUP_RATIF_FICHA_DADOS A&#13;&#10;       INNER JOIN SUP_RATIF_FICHA         B ON B.ID_RATIF_FICHA_DADOS   = A.ID_RATIF_FICHA_DADOS&#13;&#10;       INNER JOIN SUP_SOLIC_EMPENHO_FICHA C ON C.ID_RATIF_FICHA         = B.ID_RATIF_FICHA&#13;&#10;       INNER JOIN SUP_SOLIC_EMPENHO_ITEM  D ON D.ID_SOLIC_EMPENHO_ITEM  = C.ID_SOLIC_EMPENHO_ITEM&#13;&#10;       INNER JOIN SUP_SOLIC_EMPENHO       E ON E.ID_SOLIC_EMPENHO       = D.ID_SOLIC_EMPENHO&#13;&#10;       LEFT  JOIN sis_USUARIO             F ON F.id_usuario             = E.ID_SOLICITANTE&#13;&#10; WHERE A.ID_COMPRA_ITEM = :ID_COMPRA_ITEM&#13;&#10;   AND E.ID_ST_SOLIC_EMPENHO &lt;&gt; 2 --ST_PEDIDO_COMPOSICAO_CANCELADO&#13;&#10; GROUP BY&#13;&#10;       E.DT_SOLICITACAO,&#13;&#10;       F.ds_usuario,&#13;&#10;       F.NOME_usuario,&#13;&#10;       E.NR_SOLIC_EMPENHO,&#13;&#10;       E.CP_ANO&#13;&#10;&#13;&#10;UNION ALL&#13;&#10;&#13;&#10;SELECT 2 AS TP_ETAPA&#13;&#10;     , CAST('Solicitação de empenho - liberado' AS VARCHAR(40)) AS DS_ETAPA&#13;&#10;     , E.DT_LIBERACAO AS DATA&#13;&#10;     , F.ds_usuario   AS NOME&#13;&#10;     , F.NOME_usuario AS NOME_COMPLETO&#13;&#10;     , CAST('' AS VARCHAR(1000))  AS JUSTIFICATIVA&#13;&#10;     , E.NR_SOLIC_EMPENHO AS NR_DOCUMENTO&#13;&#10;     , E.CP_ANO AS ANO_DOCUMENTO&#13;&#10;     , SUM(C.QTD) AS QTD&#13;&#10;     , SUM(C.VALOR) AS VALOR&#13;&#10;  FROM SUP_RATIF_FICHA_DADOS A&#13;&#10;       INNER JOIN SUP_RATIF_FICHA         B ON B.ID_RATIF_FICHA_DADOS   = A.ID_RATIF_FICHA_DADOS&#13;&#10;       INNER JOIN SUP_SOLIC_EMPENHO_FICHA C ON C.ID_RATIF_FICHA         = B.ID_RATIF_FICHA&#13;&#10;       INNER JOIN SUP_SOLIC_EMPENHO_ITEM  D ON D.ID_SOLIC_EMPENHO_ITEM  = C.ID_SOLIC_EMPENHO_ITEM&#13;&#10;       INNER JOIN SUP_SOLIC_EMPENHO       E ON E.ID_SOLIC_EMPENHO       = D.ID_SOLIC_EMPENHO&#13;&#10;       LEFT  JOIN sis_USUARIO             F ON F.id_usuario             = E.ID_USUARIO_LIBERACAO&#13;&#10; WHERE A.ID_COMPRA_ITEM       = :ID_COMPRA_ITEM&#13;&#10;   AND E.ID_ST_SOLIC_EMPENHO &lt;&gt; 2--ST_PEDIDO_COMPOSICAO_CANCELADO&#13;&#10;   AND E.DT_LIBERACAO IS NOT NULL&#13;&#10; GROUP BY&#13;&#10;       E.DT_LIBERACAO,&#13;&#10;       F.ds_usuario,&#13;&#10;       F.NOME_usuario,&#13;&#10;       E.NR_SOLIC_EMPENHO,&#13;&#10;       E.CP_ANO&#13;&#10;&#13;&#10;UNION ALL&#13;&#10;&#13;&#10;SELECT 2 AS TP_ETAPA&#13;&#10;     , CAST('Solicitação de empenho - empenhado' AS VARCHAR(40)) AS DS_ETAPA&#13;&#10;     , G.DT_HR_EXECUCAO AS DATA&#13;&#10;     , F.ds_usuario   AS NOME&#13;&#10;     , F.NOME_usuario AS NOME_COMPLETO&#13;&#10;     , CAST('' AS VARCHAR(1000))  AS JUSTIFICATIVA&#13;&#10;     , E.NR_SOLIC_EMPENHO AS NR_DOCUMENTO&#13;&#10;     , E.CP_ANO AS ANO_DOCUMENTO&#13;&#10;     , SUM(C.QTD) AS QTD&#13;&#10;     , SUM(C.VALOR) AS VALOR&#13;&#10;  FROM SUP_RATIF_FICHA_DADOS A&#13;&#10;       INNER JOIN SUP_RATIF_FICHA         B ON B.ID_RATIF_FICHA_DADOS   = A.ID_RATIF_FICHA_DADOS&#13;&#10;       INNER JOIN SUP_SOLIC_EMPENHO_FICHA C ON C.ID_RATIF_FICHA         = B.ID_RATIF_FICHA&#13;&#10;       INNER JOIN SUP_SOLIC_EMPENHO_ITEM  D ON D.ID_SOLIC_EMPENHO_ITEM  = C.ID_SOLIC_EMPENHO_ITEM&#13;&#10;       INNER JOIN SUP_SOLIC_EMPENHO       E ON E.ID_SOLIC_EMPENHO       = D.ID_SOLIC_EMPENHO&#13;&#10;       LEFT  JOIN API_PEDIDO_EMPENHO_POR_ID(E.ID_PEDIDO_COMPOSICAO) G ON 1 = 1&#13;&#10;       LEFT  JOIN sis_USUARIO             F ON F.id_usuario             = G.ID_USUARIO_EXECUCAO&#13;&#10; WHERE A.ID_COMPRA_ITEM = :ID_COMPRA_ITEM&#13;&#10;   AND G.DT_HR_EXECUCAO IS NOT NULL&#13;&#10; GROUP BY&#13;&#10;       G.DT_HR_EXECUCAO,&#13;&#10;       F.ds_usuario,&#13;&#10;       F.NOME_usuario,&#13;&#10;       E.NR_SOLIC_EMPENHO,&#13;&#10;       E.CP_ANO&#13;&#10;&#13;&#10;UNION ALL&#13;&#10;&#13;&#10;SELECT 3 AS TP_ETAPA&#13;&#10;     , CAST('Solicitação de estorno - estornado' AS VARCHAR(40)) AS DS_ETAPA&#13;&#10;     , G.DT_HR_EXECUCAO AS DATA&#13;&#10;     , F.ds_usuario   AS NOME&#13;&#10;     , F.NOME_usuario AS NOME_COMPLETO&#13;&#10;     , CAST('' AS VARCHAR(1000))  AS JUSTIFICATIVA&#13;&#10;     , E.NR_SOLIC_ESTORNO AS NR_DOCUMENTO&#13;&#10;     , E.CP_ANO AS ANO_DOCUMENTO&#13;&#10;     , SUM(C.QTD) AS QTD&#13;&#10;     , SUM(C.VALOR) AS VALOR&#13;&#10;  FROM SUP_RATIF_FICHA_DADOS A&#13;&#10;       INNER JOIN SUP_RATIF_FICHA         B ON B.ID_RATIF_FICHA_DADOS   = A.ID_RATIF_FICHA_DADOS&#13;&#10;       INNER JOIN SUP_SOLIC_EMPENHO_FICHA C ON C.ID_RATIF_FICHA         = B.ID_RATIF_FICHA&#13;&#10;       INNER JOIN SUP_SOLIC_EMPENHO_ITEM  D ON D.ID_SOLIC_EMPENHO_ITEM  = C.ID_SOLIC_EMPENHO_ITEM&#13;&#10;       INNER JOIN SUP_SOLIC_ESTORNO       E ON E.ID_SOLIC_ESTORNO       = D.ID_SOLIC_ESTORNO&#13;&#10;       LEFT  JOIN API_PEDIDO_EMPENHO_POR_ID(E.ID_PEDIDO_COMPOSICAO) G ON 1 = 1&#13;&#10;       LEFT  JOIN sis_USUARIO             F ON F.id_usuario            = G.ID_USUARIO_EXECUCAO&#13;&#10; WHERE A.ID_COMPRA_ITEM = :ID_COMPRA_ITEM&#13;&#10;   AND G.DT_HR_EXECUCAO IS NOT NULL&#13;&#10; GROUP BY&#13;&#10;       G.DT_HR_EXECUCAO,&#13;&#10;       F.ds_usuario,&#13;&#10;       F.NOME_usuario,&#13;&#10;       E.NR_SOLIC_ESTORNO,&#13;&#10;       E.CP_ANO&#13;&#10;&#13;&#10;UNION ALL&#13;&#10;&#13;&#10;SELECT 4 AS TP_ETAPA&#13;&#10;     , CAST('Autorização de fornecimento' AS VARCHAR(40)) AS DS_ETAPA&#13;&#10;     , E.DT_CADASTRO AS DATA&#13;&#10;     , F.ds_usuario   AS NOME&#13;&#10;     , F.NOME_usuario AS NOME_COMPLETO&#13;&#10;     , CAST('' AS VARCHAR(1000))  AS JUSTIFICATIVA&#13;&#10;     , E.NR_AUTORIZACAO AS NR_DOCUMENTO&#13;&#10;     , E.ANO_AUTORIZACAO AS ANO_DOCUMENTO&#13;&#10;     , SUM(D.QTD) AS QTD&#13;&#10;     , SUM(D.VALOR) AS VALOR&#13;&#10;  FROM SUP_RATIF_FICHA_DADOS A&#13;&#10;       INNER JOIN SUP_RATIF_FICHA         B ON B.ID_RATIF_FICHA_DADOS   = A.ID_RATIF_FICHA_DADOS&#13;&#10;       INNER JOIN SUP_SOLIC_EMPENHO_FICHA C ON C.ID_RATIF_FICHA         = B.ID_RATIF_FICHA&#13;&#10;       INNER JOIN SUP_AUTORIZACAO_FICHA   D ON D.ID_SOLIC_EMPENHO_FICHA = C.ID_SOLIC_EMPENHO_FICHA&#13;&#10;       INNER JOIN SUP_AUTORIZACAO         E ON E.ID_AUTORIZACAO         = D.ID_AUTORIZACAO&#13;&#10;       LEFT  JOIN sis_USUARIO             F ON F.id_usuario             = E.ID_RESPONSAVEL&#13;&#10; WHERE A.ID_COMPRA_ITEM = :ID_COMPRA_ITEM&#13;&#10;   AND E.ID_ST_AUTORIZACAO &lt;&gt; 2 --ST_AUTORIZACAO_CANCELADO&#13;&#10; GROUP BY&#13;&#10;       E.DT_CADASTRO,&#13;&#10;       F.ds_usuario,&#13;&#10;       F.NOME_usuario,&#13;&#10;       E.NR_AUTORIZACAO,&#13;&#10;       E.ANO_AUTORIZACAO&#13;&#10;&#13;&#10;UNION ALL&#13;&#10;&#13;&#10;SELECT 5 AS TP_ETAPA&#13;&#10;     , CAST('Liberação de NF' AS VARCHAR(40)) AS DS_ETAPA&#13;&#10;     , G.DT_CADASTRO AS DATA&#13;&#10;     , F.ds_usuario   AS NOME&#13;&#10;     , F.NOME_usuario AS NOME_COMPLETO&#13;&#10;     , CAST('' AS VARCHAR(1000))  AS JUSTIFICATIVA&#13;&#10;     , G.ID_LIBERACAO_NF AS NR_DOCUMENTO&#13;&#10;     , EXTRACT(YEAR FROM G.DT_LIBERACAO_NF) AS ANO_DOCUMENTO&#13;&#10;     , SUM(E.QTD) AS QTD&#13;&#10;     , SUM(E.VALOR) AS VALOR&#13;&#10;  FROM SUP_RATIF_FICHA_DADOS A&#13;&#10;       INNER JOIN SUP_RATIF_FICHA         B ON B.ID_RATIF_FICHA_DADOS   = A.ID_RATIF_FICHA_DADOS&#13;&#10;       INNER JOIN SUP_SOLIC_EMPENHO_FICHA C ON C.ID_RATIF_FICHA         = B.ID_RATIF_FICHA&#13;&#10;       INNER JOIN SUP_AUTORIZACAO_FICHA   D ON D.ID_SOLIC_EMPENHO_FICHA = C.ID_SOLIC_EMPENHO_FICHA&#13;&#10;       INNER JOIN SUP_LIBERACAO_NF_FICHA  E ON E.ID_AUTORIZACAO_FICHA   = D.ID_AUTORIZACAO_FICHA&#13;&#10;       INNER JOIN SUP_LIBERACAO_NF        G ON G.ID_LIBERACAO_NF        = E.ID_LIBERACAO_NF&#13;&#10;       LEFT  JOIN sis_USUARIO             F ON F.id_usuario             = G.ID_USUARIO&#13;&#10; WHERE A.ID_COMPRA_ITEM = :ID_COMPRA_ITEM&#13;&#10; GROUP BY&#13;&#10;       G.DT_CADASTRO,&#13;&#10;       F.ds_usuario,&#13;&#10;       F.nome_usuario,&#13;&#10;       G.ID_LIBERACAO_NF,&#13;&#10;       G.DT_LIBERACAO_NF&#13;&#10;&#13;&#10; ORDER BY 3, 1">
        <Column Name="tp_etapa" DataType="System.Int32"/>
        <Column Name="ds_etapa" DataType="System.String"/>
        <Column Name="data" DataType="System.DateTime"/>
        <Column Name="justificativa" DataType="System.String"/>
        <Column Name="nr_documento" DataType="System.Int32"/>
        <Column Name="ano_documento" DataType="System.Int32"/>
        <Column Name="qtd" DataType="System.Double"/>
        <Column Name="vl_total" DataType="System.Double"/>
        <Column Name="nome" DataType="System.String"/>
        <Column Name="nome_completo" DataType="System.String"/>
        <CommandParameter Name="id_compra_item" DataType="9" Expression="[sqlSolicitacaoCompraItem.id_compra_item]"/>
        <CommandParameter Name="utiliza_def_comprador" DataType="9" Expression="[sqlSolicitacaoCompraItem.utiliza_def_comprador]"/>
        <CommandParameter Name="utiliza_aprov_fin" DataType="9" Expression="[sqlSolicitacaoCompraItem.utiliza_aprov_fin]"/>
      </TableDataSource>
    </PostgresDataConnection>
    <Parameter Name="tituloRelatorio" DataType="System.String" Expression="&quot;FLUXO DO ITEM DA SOLICITAÇÃO DE COMPRA&quot;"/>
    <Parameter Name="idEntidade" DataType="System.Int64" Expression="2"/>
    <Parameter Name="idModulo" DataType="System.Int64" Expression="-1"/>
    <Parameter Name="idLogin" DataType="System.Int64" Expression="-1"/>
    <Parameter Name="idUsuario" DataType="System.Int64" Expression="-1"/>
    <Parameter Name="idRelatorioFiltro" DataType="System.Int64" Expression="-1"/>
    <Parameter Name="periodo" DataType="System.String" Expression="&quot;&quot;"/>
    <Parameter Name="filtro" DataType="System.String" Expression="&quot;&quot;"/>
    <Parameter Name="personalizado" DataType="System.Int64" Expression="0"/>
    <Parameter Name="imprimirUsuario" DataType="System.Int64" Expression="1"/>
    <Parameter Name="imprimirData" DataType="System.Int64" Expression="1"/>
    <Parameter Name="idCompraItem" DataType="System.Int64" Expression="115823"/>
  </Dictionary>
  <inherited Name="MainPage">
    <inherited Name="BndCabecalho" Top="0">
      <inherited Name="ImgBrasao" ImageAlign="Center_Center"/>
      <inherited Name="TxtEntidade"/>
      <inherited Name="ImgLogo" ImageAlign="Center_Center"/>
      <inherited Name="TxtTituloModulo1"/>
      <inherited Name="TxtTituloModulo2"/>
      <inherited Name="TxtTituloRelatorio"/>
      <inherited Name="TxtPeriodo"/>
      <inherited Name="BndFiltro" Top="98.67">
        <inherited Name="TxtFiltro"/>
        <ChildBand Name="BndScFluxoCabecalho" ZOrder="-1" Top="121.73" Width="718.2" Height="127.68">
          <TextObject Name="Text1" Top="4.54" Width="280.1" Height="18.9" Border.Lines="All" Fill.Color="41, 82, 118" Text="SC [sqlSolicitacaoCompraItem.NR_SOLICITACAO_COMPRA]/[sqlSolicitacaoCompraItem.ANO_SOLICITACAO_COMPRA] ([sqlSolicitacaoCompraItem.SIGLA])&#13;&#10;" Font="Tahoma, 11pt, style=Bold" TextFill.Color="White">
            <Formats>
              <CustomFormat Format="00000"/>
              <GeneralFormat/>
              <GeneralFormat/>
            </Formats>
          </TextObject>
          <ContainerObject Name="Container3" Top="23.35" Width="718.2" Height="104.33">
            <TextObject Name="Text140" Width="130.03" Height="20.03" Border.Lines="All" Text="Solicitado em:" HorzAlign="Right" VertAlign="Center" Font="Tahoma, 8pt"/>
            <TextObject Name="Text141" Left="130.03" Width="74.84" Height="20.03" Border.Lines="All" Fill.Color="ButtonFace" CanGrow="true" Text="[sqlSolicitacaoCompraItem.DT_SOLICITACAO_COMPRA]&#13;&#10;" Format="Date" Format.Format="dd/MM/yyyy" HorzAlign="Center" VertAlign="Center" Font="Tahoma, 7pt, style=Bold"/>
            <TextObject Name="Text142" Left="204.88" Width="88.83" Height="20.03" Border.Lines="All" CanGrow="true" Text="Solicitante:" HorzAlign="Right" VertAlign="Center" Font="Tahoma, 8pt"/>
            <TextObject Name="Text143" Left="292.95" Width="425.25" Height="20.03" Border.Lines="All" Fill.Color="ButtonFace" CanGrow="true" Text="[Trim([sqlSolicitacaoCompraItem.NOME_COMPLETO_SOLICITANTE])] - [Trim([sqlSolicitacaoCompraItem.NOME_SOLICITANTE])]&#13;&#10;" VertAlign="Center" Font="Tahoma, 8pt, style=Bold"/>
            <TextObject Name="Text144" Top="40.07" Width="130.03" Height="20.03" Border.Lines="All" CanGrow="true" Text="Unidade solicitante:" HorzAlign="Right" VertAlign="Center" Font="Tahoma, 8pt"/>
            <TextObject Name="Text145" Left="130.03" Top="40.07" Width="588.17" Height="20.03" Border.Lines="All" Fill.Color="Control" CanGrow="true" Text="[Trim([sqlSolicitacaoCompraItem.DS_UNIDADE_ADM])] - ([sqlSolicitacaoCompraItem.CD_UNIDADE_ADM])&#13;&#10;" VertAlign="Center" Font="Tahoma, 8pt, style=Bold"/>
            <TextObject Name="Text146" Top="20.03" Width="130.03" Height="20.03" Border.Lines="All" Text="Aprovado em:" HorzAlign="Right" VertAlign="Center" Font="Tahoma, 8pt"/>
            <TextObject Name="Text147" Left="130.03" Top="20.03" Width="74.84" Height="20.03" Border.Lines="All" Fill.Color="ButtonFace" CanGrow="true" Text="[sqlSolicitacaoCompraItem.DT_APROVACAO]&#13;&#10;" Format="Date" Format.Format="dd/MM/yyyy" HorzAlign="Center" VertAlign="Center" Font="Tahoma, 7pt, style=Bold"/>
            <TextObject Name="Text148" Left="204.88" Top="20.03" Width="88.83" Height="20.03" Border.Lines="All" CanGrow="true" Text="Aprovador:" HorzAlign="Right" VertAlign="Center" Font="Tahoma, 8pt"/>
            <TextObject Name="Text149" Left="292.95" Top="20.03" Width="425.25" Height="20.03" Border.Lines="All" Fill.Color="ButtonFace" CanGrow="true" Text="[Trim([sqlSolicitacaoCompraItem.NOME_COMPLETO_APROVADOR])] - [Trim([sqlSolicitacaoCompraItem.NOME_APROVADOR])]&#13;&#10;" VertAlign="Center" Font="Tahoma, 8pt, style=Bold"/>
            <TextObject Name="Text150" Top="60.1" Width="130.03" Height="20.03" Border.Lines="All" CanGrow="true" Text="Centro de Consumo:" HorzAlign="Right" VertAlign="Center" Font="Tahoma, 8pt"/>
            <TextObject Name="Text151" Left="130.03" Top="60.1" Width="588.17" Height="20.03" Border.Lines="All" Fill.Color="Control" CanGrow="true" Text="[sqlSolicitacaoCompraItem.DS_CENTRO_CONSUMO] - ([sqlSolicitacaoCompraItem.CD_CENTRO_CONSUMO])&#13;&#10;" VertAlign="Center" Font="Tahoma, 8pt, style=Bold"/>
            <TextObject Name="Text152" Top="80.05" Width="130.03" Height="20.03" Border.Lines="All" CanGrow="true" Text="Tipo de Entrega:" HorzAlign="Right" VertAlign="Center" Font="Tahoma, 8pt"/>
            <TextObject Name="Text153" Left="365.15" Top="80.05" Width="353.05" Height="20.03" Border.Lines="All" CanGrow="true" Text="[IIf([sqlSolicitacaoCompraItem.PRAZO_ENTREGA] &gt; 0, [sqlSolicitacaoCompraItem.PRAZO_ENTREGA] + &quot; &quot; + [sqlSolicitacaoCompraItem.DS_TP_MEDIDA_PRAZO] , &quot;&quot;)]&#13;&#10;" VertAlign="Center" Font="Tahoma, 8pt, style=Bold"/>
            <TextObject Name="Text154" Left="264.98" Top="80.14" Width="100.17" Height="20.03" Border.Lines="All" CanGrow="true" Text="Prazo de Entrega:" HorzAlign="Right" VertAlign="Center" Font="Tahoma, 8pt"/>
            <TextObject Name="Text155" Left="130.03" Top="80.14" Width="134.95" Height="20.03" Border.Lines="All" CanGrow="true" Text="[sqlSolicitacaoCompraItem.DS_TP_ENTREGA]&#13;&#10;" VertAlign="Center" Font="Tahoma, 8pt, style=Bold"/>
          </ContainerObject>
          <ChildBand Name="BndScFluxoMaterial" Top="253.58" Width="718.2" Height="38.93" CanGrow="true" BeforePrintEvent="BndScFluxoMaterial_BeforePrint">
            <TextObject Name="Text117" Top="18.9" Width="48.76" Height="20.03" Border.Lines="All" Fill.Color="53, 103, 149" CanBreak="false" Text="[sqlSolicitacaoCompraItem.ORDEM]" Format="Custom" Format.Format="0000" HorzAlign="Center" VertAlign="Center" Font="Tahoma, 8pt, style=Bold" TextFill.Color="White"/>
            <TextObject Name="Text118" Left="48.76" Top="18.9" Width="669.44" Height="20.03" Border.Lines="All" CanGrow="true" GrowToBottom="true" CanBreak="false" Text="&lt;u&gt;[sqlSolicitacaoCompraItem.TP_MATERIAL].[sqlSolicitacaoCompraItem.CD_GRUPO_MATERIAL].[sqlSolicitacaoCompraItem.CD_SUBGRUPO_MATERIAL].[sqlSolicitacaoCompraItem.CD_MATERIAL]&lt;/u&gt;&#13;&#10;&lt;b&gt;[sqlSolicitacaoCompraItem.DS_MATERIAL]&lt;/b&gt;&#13;&#10;Unidade: [sqlSolicitacaoCompraItem.un_material]&#13;&#10;" VertAlign="Center" Font="Tahoma, 8pt" TextRenderType="HtmlParagraph">
              <Formats>
                <GeneralFormat/>
                <CustomFormat Format="000"/>
                <CustomFormat Format="000"/>
                <CustomFormat Format="00000000"/>
                <GeneralFormat/>
              </Formats>
            </TextObject>
            <TextObject Name="Text156" Width="311.85" Height="18.9" Text="Fluxo do Material:" VertAlign="Center" Font="Arial, 8pt, style=Bold"/>
            <ChildBand Name="BndScFluxoServico" Top="296.68" Width="718.2" Height="38.93" CanGrow="true" BeforePrintEvent="BndScFluxoServico_BeforePrint" Guides="18.9">
              <TextObject Name="Text157" Top="18.9" Width="48.76" Height="20.03" Border.Lines="All" Fill.Color="53, 103, 149" CanBreak="false" Text="[sqlSolicitacaoCompraItem.ORDEM]" Format="Custom" Format.Format="0000" HorzAlign="Center" VertAlign="Center" Font="Tahoma, 8pt, style=Bold" TextFill.Color="White"/>
              <TextObject Name="Text158" Left="48.76" Top="18.9" Width="669.44" Height="20.03" Border.Lines="All" CanGrow="true" GrowToBottom="true" CanBreak="false" Text="&lt;u&gt;[sqlSolicitacaoCompraItem.CD_GRUPO_SERVICO].[sqlSolicitacaoCompraItem.CD_SUBGRUPO_SERVICO]&lt;/u&gt;&#13;&#10;&lt;b&gt;[sqlSolicitacaoCompraItem.DS_GRUPO_SERVICO] - [sqlSolicitacaoCompraItem.DS_SUBGRUPO_SERVICO]&lt;/b&gt; [IIf([sqlSolicitacaoCompraItem.un_servico] == &quot;&quot;, &quot;&quot;, &quot;Unidade: &quot; + [sqlSolicitacaoCompraItem.un_servico])]&#13;&#10;" VertAlign="Center" Font="Tahoma, 8pt" TextRenderType="HtmlParagraph">
                <Formats>
                  <GeneralFormat/>
                  <CustomFormat Format="000"/>
                  <CustomFormat Format="000"/>
                  <CustomFormat Format="00000000"/>
                  <GeneralFormat/>
                </Formats>
              </TextObject>
              <TextObject Name="Text159" Width="311.85" Height="18.9" Text="Fluxo do Serviço:" VertAlign="Center" Font="Arial, 8pt, style=Bold"/>
              <ChildBand Name="BndScFLuxo" Top="339.77" Width="718.2" Height="29.48">
                <TextObject Name="Text160" Top="9.45" Width="269.89" Height="20.03" Border.Lines="All" Fill.Color="ButtonFace" CanGrow="true" Text="Etapa" HorzAlign="Center" VertAlign="Center" Font="Tahoma, 8pt, style=Bold"/>
                <TextObject Name="Text161" Left="269.89" Top="9.45" Width="268" Height="20.03" Border.Lines="All" Fill.Color="ButtonFace" CanGrow="true" Text="Usuario" HorzAlign="Center" VertAlign="Center" Font="Tahoma, 8pt, style=Bold"/>
                <TextObject Name="Text162" Left="537.89" Top="9.45" Width="89.96" Height="20.03" Border.Lines="All" Fill.Color="ButtonFace" CanGrow="true" Text="Quantidade" Format="Date" Format.Format="dd/MM/yyyy" HorzAlign="Center" VertAlign="Center" Font="Tahoma, 7pt, style=Bold"/>
                <TextObject Name="Text163" Left="627.86" Top="9.45" Width="89.96" Height="20.03" Border.Lines="All" Fill.Color="ButtonFace" CanGrow="true" Text="Valor Total" Format="Date" Format.Format="dd/MM/yyyy" HorzAlign="Center" VertAlign="Center" Font="Tahoma, 7pt, style=Bold"/>
              </ChildBand>
            </ChildBand>
          </ChildBand>
        </ChildBand>
      </inherited>
    </inherited>
    <DataBand Name="Data1" ZOrder="0" Top="373.42" Width="718.2" CanGrow="true" DataSource="Table3">
      <DataBand Name="Data2" Top="377.59" Width="718.2" Height="40.07" Border.Lines="Left, Top, Bottom" CanGrow="true" DataSource="Table4">
        <TextObject Name="Text164" Width="269.89" Height="40.07" Anchor="Top, Bottom, Left, Right" CanGrow="true" Text="&lt;b&gt;[SqlFluxo.DATA]&lt;/b&gt;&#13;&#10;[SqlFluxo.ds_etapa]&#13;&#10;&lt;i&gt;[IIf([SqlFluxo.ano_documento] &gt; 0, &quot;Documento: &quot; + [SqlFluxo.nr_documento] + &quot;/&quot; + [SqlFluxo.ano_documento], &quot;&quot;)]&lt;/i&gt;&#13;&#10;" VertAlign="Center" Font="Arial, 7pt" TextRenderType="HtmlParagraph"/>
        <TextObject Name="Text165" Left="269.89" Width="268" Height="40.07" Anchor="Top, Bottom, Left" Border.Lines="Left, Right" CanGrow="true" Text="[Trim([SqlFluxo.nome_completo])]&#13;&#10;Login: &lt;b&gt;[Trim([SqlFluxo.nome])]&#13;&#10;[IIf([SqlFluxo.justificativa] == &quot;&quot;, &quot;&quot;, &quot;Justificativa: &quot;)]&lt;/b&gt; [IIf([SqlFluxo.justificativa] == &quot;&quot;, &quot;&quot;, [SqlFluxo.justificativa])]" VertAlign="Center" Font="Arial, 7pt" TextRenderType="HtmlParagraph"/>
        <TextObject Name="Text166" Left="537.89" Width="89.96" Height="40.07" Anchor="Top, Bottom, Left, Right" Border.Lines="Left, Right" CanGrow="true" GrowToBottom="true" Text="[SqlFluxo.qtd]&#13;&#10;" HideZeros="true" Format="Number" Format.UseLocale="true" Format.DecimalDigits="4" HorzAlign="Right" VertAlign="Center" Font="Arial, 7pt, style=Bold" TextRenderType="HtmlParagraph"/>
        <TextObject Name="Text167" Left="627.86" Width="89.96" Height="40.07" Anchor="Top, Bottom, Left" Border.Lines="Left, Right" CanGrow="true" GrowToBottom="true" Text="[SqlFluxo.vl_total]&#13;&#10;" Format="Number" Format.UseLocale="true" Format.DecimalDigits="2" HorzAlign="Right" VertAlign="Center" Font="Arial, 7pt, style=Bold" TextRenderType="HtmlParagraph"/>
      </DataBand>
    </DataBand>
    <inherited Name="BndRodape" Top="421.82">
      <inherited Name="TxtRodape"/>
      <inherited Name="TxtPaginacao">
        <Formats>
          <GeneralFormat/>
          <GeneralFormat/>
        </Formats>
      </inherited>
      <inherited Name="TxtEndereco">
        <Formats>
          <GeneralFormat/>
          <GeneralFormat/>
          <GeneralFormat/>
          <GeneralFormat/>
          <GeneralFormat/>
          <GeneralFormat/>
          <GeneralFormat/>
        </Formats>
      </inherited>
    </inherited>
  </inherited>
</inherited>
