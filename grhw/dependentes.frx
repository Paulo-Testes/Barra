<?xml version="1.0" encoding="utf-8"?>
<inherited BaseReport="C:\gsr-reports\base\paisagem.frx" BaseReportAbsolutePath="C:\gsr-reports\base\paisagem.frx" ScriptLanguage="CSharp" ReportInfo.Created="02/01/2024 10:35:21" ReportInfo.Modified="08/07/2025 08:49:37" ReportInfo.CreatorVersion="2025.1.10.0">
  <ScriptText>using System;
using System.Collections;
using System.Collections.Generic;
using System.ComponentModel;
using System.Windows.Forms;
using System.Drawing;
using System.Data;
using FastReport;
using FastReport.Data;
using FastReport.Dialog;
using FastReport.Barcode;
using FastReport.Table;
using FastReport.Utils;

namespace FastReport
{
  public class ReportScript
  {
    private void parent_BndCabecalho_BeforePrint(object sender, EventArgs e)
    {
      string titulo1 = (String)Report.GetColumnValue(&quot;SqlModulo.titulo_1&quot;);
      string titulo2 = (String)Report.GetColumnValue(&quot;SqlModulo.titulo_2&quot;);

      if (string.IsNullOrWhiteSpace(titulo1) &amp;&amp; string.IsNullOrWhiteSpace(titulo2))
      {
        TxtTituloRelatorio.Top = TxtTituloModulo1.Top;
        TxtPeriodo.Top = TxtTituloModulo2.Top;
        BndCabecalho.Height = (float)75.6;
      } 
      else if (string.IsNullOrWhiteSpace(titulo1))
      {
        TxtPeriodo.Top = TxtTituloRelatorio.Top;
        TxtTituloRelatorio.Top = TxtTituloModulo2.Top;
        TxtTituloModulo2.Top = TxtTituloModulo1.Top;
        BndCabecalho.Height = (float)75.6;
      } 
      else if (string.IsNullOrWhiteSpace(titulo2))
      {
        TxtPeriodo.Top = TxtTituloRelatorio.Top;
        TxtTituloRelatorio.Top = TxtTituloModulo2.Top;
        BndCabecalho.Height = (float)75.6;
      }
      
      ImgBrasao.Height = BndCabecalho.Height;
      ImgLogo.Height = BndCabecalho.Height;
    }    
    
    private void parent_BndFiltro_BeforePrint(object sender, EventArgs e)
    {
      BndFiltro.Visible = !string.IsNullOrWhiteSpace((String)Report.GetParameterValue(&quot;filtro&quot;));
    }    
    
    private void parent_BndRodape_BeforePrint(object sender, EventArgs e)
    {
      if (string.IsNullOrWhiteSpace((String)Report.GetColumnValue(&quot;SqlEntidade.endereco&quot;))) 
      {
        TxtRodape.Top = TxtEndereco.Top;
        TxtPaginacao.Top = TxtEndereco.Top;
        TxtEndereco.Visible = false;
        BndRodape.Height = (float)15.12; 
      }
      
      TxtRodape.Text = (String)Report.GetColumnValue(&quot;SqlEntidade.sigla&quot;);

      long personalizado = (Int64)Report.GetParameterValue(&quot;personalizado&quot;);
      long imprimirUsuario = (Int64)Report.GetParameterValue(&quot;imprimirUsuario&quot;);
      long imprimirData = (Int64)Report.GetParameterValue(&quot;imprimirData&quot;);

      if (imprimirUsuario == 1)
      {
        TxtRodape.Text += &quot; | &quot; + (String)Report.GetColumnValue(&quot;SqlUsuario.nome&quot;) + (String)Report.GetColumnValue(&quot;SqlUsuario.ds_usuario&quot;);
      }

      if (personalizado == 1)
      {
        TxtRodape.Text += &quot; | PERSONALIZADO&quot;;
      }
      else if (personalizado == 2)
      {
        TxtRodape.Text += &quot; | EXCLUSIVO&quot;;
      }

      if (imprimirData == 1)
      {
        TxtRodape.Text += &quot; | &quot; + (DateTime)Report.GetVariableValue(&quot;Date&quot;);
      }
    }   

    private void Data1_BeforePrint(object sender, EventArgs e)
    {
      int grau = Convert.ToInt32(Report.GetColumnValue(&quot;qu_dependentes.GRAU&quot;));

      switch (grau)
      {
        case 0:  mGrau.Text = &quot;Cônjuge / Companheiro&quot;; break;
        case 1:  mGrau.Text = &quot;Filho(a) Menor&quot;; break;
        case 2:  mGrau.Text = &quot;Filho(a) Universitário&quot;; break;
        case 3:  mGrau.Text = &quot;Filho(a) s/ Arrimo&quot;; break;
        case 4:  mGrau.Text = &quot;Neto(a) s/ Arrimo&quot;; break;
        case 5:  mGrau.Text = &quot;Neto(a) Universitário&quot;; break;
        case 6:  mGrau.Text = &quot;Pais&quot;; break;
        case 7:  mGrau.Text = &quot;Irmão Inválido&quot;; break;
        case 8:  mGrau.Text = &quot;Menor Pobre&quot;; break;
        case 9:  mGrau.Text = &quot;Menor Universitário&quot;; break;
        case 10: mGrau.Text = &quot;Incapaz&quot;; break;
        case 11: mGrau.Text = &quot;Não Preenchido&quot;; break;
        default: mGrau.Text = &quot;&quot;; break;
      }
    }

    private void MainPage_StartPage(object sender, EventArgs e)
    {
      var filtro = Report.GetParameterValue(&quot;Filtro&quot;)?.ToString();

      if (!string.IsNullOrEmpty(filtro))
      {
        // Isso depende do seu backend, mas se estiver usando um TableDataSource:
        var data = Report.GetDataSource(&quot;qu_dependentes&quot;) as TableDataSource;
        if (data != null)
        {
          data.SelectCommand += &quot; and &quot; + filtro + &quot; order by b.chapa, b.nome_dependente&quot;;
        }
      }
    }
  }
}</ScriptText>
  <Dictionary>
    <PostgresDataConnection Name="Connection" ConnectionString="rijcmlqiSaocAniJQNoKNFeaTFzMe98Srvu/H0B5rG99iH0rlAD52+0S9jQVqtbGjnQ1fJfcaegeqkp60BrLd+YLnR4XqyfZaBNherXEOpLePTulRqrY+ChMEL6VHdEuu5eaQq8E+ZDa9Ad9YImM+XDJvP1O/Yqr3nTMZdCNBuiKLyoV2A=">
      <TableDataSource Name="SqlEntidade" Restrictions="DontMove, DontResize, DontModify, DontEdit, DontDelete" DataType="System.Int32" PropName="Table" Enabled="true" SelectCommand="select coalesce(enti.ds_entidade, lice.ds_licenciado) as nome&#13;&#10;     , pess.documento_formatado as cnpj&#13;&#10;     , lice.imagem as brasao&#13;&#10;     , coalesce(enti.sigla, lice.sigla) as sigla&#13;&#10;     , enti.imagem as logo&#13;&#10;     , case when enti.id_entidade is not null then ende.endereco end as endereco&#13;&#10;     , fone.contato as telefone&#13;&#10;     , mail.contato as email&#13;&#10;     , site.contato as site&#13;&#10;  from sis_licenciado            lice&#13;&#10;  left join sis_entidade         enti on enti.id_entidade        = :id_entidade&#13;&#10;  left join sis_pessoa           pess on pess.id_pessoa_juridica = enti.id_pessoa_juridica&#13;&#10;  left join sis_pessoa_endereco  ende on ende.id_pessoa          = pess.id_pessoa&#13;&#10;                                     and ende.principal          = 1&#13;&#10;  left join sis_pessoa_contato   fone on fone.id_pessoa          = pess.id_pessoa&#13;&#10;                                     and fone.id_tp_contato      = 2&#13;&#10;                                     and fone.principal          = true&#13;&#10;  left join sis_pessoa_contato   mail on mail.id_pessoa          = pess.id_pessoa&#13;&#10;                                     and mail.id_tp_contato      = 1&#13;&#10;                                     and mail.principal          = true&#13;&#10;  left join sis_pessoa_contato   site on site.id_pessoa          = pess.id_pessoa&#13;&#10;                                     and site.id_tp_contato      = 4&#13;&#10;                                     and site.principal          = true&#13;&#10; limit 1">
        <Column Name="nome" Restrictions="DontMove, DontResize, DontModify, DontEdit, DontDelete" DataType="System.String"/>
        <Column Name="endereco" Restrictions="DontMove, DontResize, DontModify, DontEdit, DontDelete" DataType="System.String"/>
        <Column Name="telefone" Restrictions="DontMove, DontResize, DontModify, DontEdit, DontDelete" DataType="System.String"/>
        <Column Name="cnpj" Restrictions="DontMove, DontResize, DontModify, DontEdit, DontDelete" DataType="System.String"/>
        <Column Name="brasao" Restrictions="DontMove, DontResize, DontModify, DontEdit, DontDelete" DataType="System.Byte[]" BindableControl="Picture"/>
        <Column Name="sigla" Restrictions="DontMove, DontResize, DontModify, DontEdit, DontDelete" DataType="System.String"/>
        <Column Name="logo" Restrictions="DontMove, DontResize, DontModify, DontEdit, DontDelete" DataType="System.Byte[]" BindableControl="Picture"/>
        <Column Name="email" Restrictions="DontMove, DontResize, DontModify, DontEdit, DontDelete" DataType="System.String"/>
        <Column Name="site" Restrictions="DontMove, DontResize, DontModify, DontEdit, DontDelete" DataType="System.String"/>
        <CommandParameter Name="id_entidade" DataType="9" Expression="[idEntidade]"/>
      </TableDataSource>
      <TableDataSource Name="SqlModulo" Restrictions="DontMove, DontResize, DontModify, DontEdit, DontDelete" DataType="System.Int32" PropName="Table2" Enabled="true" SelectCommand="select a.titulo_1&#13;&#10;     , a.titulo_2&#13;&#10;  from sis_modulo a&#13;&#10; where a.id_modulo = :id_modulo">
        <Column Name="titulo_1" Restrictions="DontMove, DontResize, DontModify, DontEdit, DontDelete" DataType="System.String"/>
        <Column Name="titulo_2" Restrictions="DontMove, DontResize, DontModify, DontEdit, DontDelete" DataType="System.String"/>
        <CommandParameter Name="id_modulo" DataType="9" Expression="[idModulo]"/>
      </TableDataSource>
      <TableDataSource Name="SqlUsuario" Restrictions="DontMove, DontResize, DontModify, DontEdit, DontDelete" DataType="System.Int32" PropName="Table1" Enabled="true" SelectCommand="select log.nome&#13;&#10;     , case when usu.ds_usuario is not null then ' (' || trim(usu.ds_usuario) || ')' end as ds_usuario &#13;&#10;  from sis_login log &#13;&#10;  left join sis_usuario usu on usu.id_usuario = :id_usuario&#13;&#10; where log.id_login = :id_login&#13;&#10; limit 1">
        <Column Name="ds_usuario" Restrictions="DontMove, DontResize, DontModify, DontEdit, DontDelete" DataType="System.String"/>
        <Column Name="nome" Restrictions="DontMove, DontResize, DontModify, DontEdit, DontDelete" DataType="System.String"/>
        <CommandParameter Name="id_login" DataType="9" Expression="[idLogin]"/>
        <CommandParameter Name="id_usuario" DataType="9" Expression="[idUsuario]"/>
      </TableDataSource>
      <TableDataSource Name="Table" Alias="qu_dependentes" DataType="System.Int32" Enabled="true" SelectCommand="SELECT                                                              &#13;&#10;    b.chapa,&#13;&#10;    a.c001 as nome,&#13;&#10;    b.nome_dependente,&#13;&#10;    b.nascimento,&#13;&#10;    (select case c.descricao&#13;&#10;        when 'Masculino' then cast ('M' as varchar(255))&#13;&#10;        when 'Feminino' then cast('F' as varchar(255))&#13;&#10;        else cast('' as varchar(255)) end&#13;&#10;      from aac_tabelas_internas c where c.tipo = 'SEXO' and b.sexo = c.chave) as sexo,&#13;&#10;    b.grau,&#13;&#10;    b.dependente_ir_ate,&#13;&#10;    b.salario_familia_ate,&#13;&#10;    b.nome_mae,&#13;&#10;    b.cpf,&#13;&#10;    cast((select t.descricao from aac_tabelas_internas t where t.tipo = 'ESTCIVIL' and b.est_civil = t.chave) as varchar(255))as est_civil&#13;&#10;&#13;&#10;FROM&#13;&#10;    GRH_Dependentes b&#13;&#10;&#13;&#10;left join&#13;&#10;    grh_cadastro_funcionarios a on&#13;&#10;    (a.c000 = b.chapa)&#13;&#10;&#13;&#10;&#13;&#10;where (a.id_estabelecimento = :id_estabelecimento)&#13;&#10;">
        <Column Name="chapa" DataType="System.Int32"/>
        <Column Name="nome" DataType="System.String"/>
        <Column Name="nome_dependente" DataType="System.String"/>
        <Column Name="nascimento" DataType="System.DateTime"/>
        <Column Name="sexo" DataType="System.String"/>
        <Column Name="grau" DataType="System.Int16"/>
        <Column Name="dependente_ir_ate" DataType="System.Int16"/>
        <Column Name="salario_familia_ate" DataType="System.Int16"/>
        <Column Name="nome_mae" DataType="System.String"/>
        <Column Name="cpf" DataType="System.String"/>
        <Column Name="est_civil" DataType="System.String"/>
        <CommandParameter Name="id_estabelecimento" DataType="22" DefaultValue="1"/>
      </TableDataSource>
    </PostgresDataConnection>
    <Parameter Name="tituloRelatorio" DataType="System.String" Expression="&quot;Relatório de Dependentes&quot;"/>
    <Parameter Name="idEntidade" DataType="System.Int64" Expression="-1"/>
    <Parameter Name="idModulo" DataType="System.Int64" Expression="-1"/>
    <Parameter Name="idLogin" DataType="System.Int64" Expression="-1"/>
    <Parameter Name="idUsuario" DataType="System.Int64" Expression="-1"/>
    <Parameter Name="idRelatorioFiltro" DataType="System.Int64" Expression="-1"/>
    <Parameter Name="periodo" DataType="System.String" Expression="&quot;&quot;"/>
    <Parameter Name="filtro" DataType="System.String" Expression="&quot;&quot;"/>
    <Parameter Name="personalizado" DataType="System.Int64" Expression="0"/>
    <Parameter Name="imprimirUsuario" DataType="System.Int64" Expression="1"/>
    <Parameter Name="imprimirData" DataType="System.Int64" Expression="1"/>
    <Parameter Name="idEstabelecimento" DataType="System.Int64" Expression="1"/>
  </Dictionary>
  <inherited Name="MainPage" StartPageEvent="MainPage_StartPage">
    <inherited Name="BndCabecalho">
      <inherited Name="ImgBrasao" ImageAlign="Center_Center"/>
      <inherited Name="TxtEntidade"/>
      <inherited Name="ImgLogo" ImageAlign="Center_Center"/>
      <inherited Name="TxtTituloModulo1"/>
      <inherited Name="TxtTituloModulo2"/>
      <inherited Name="TxtTituloRelatorio"/>
      <inherited Name="TxtPeriodo"/>
      <inherited Name="BndFiltro" Top="97.7">
        <inherited Name="TxtFiltro"/>
      </inherited>
    </inherited>
    <GroupHeaderBand Name="GroupHeader1" ZOrder="0" Top="119.8" Width="1047.06" Height="66.15" Fill.Color="Gainsboro" KeepWithData="true" RepeatOnEveryPage="true" Condition="[qu_dependentes.chapa]">
      <TextObject Name="Text1" Left="11.34" Top="3.78" Width="55.19" Height="18.9" Text="Chapa:" Font="Arial, 10pt, style=Bold"/>
      <TextObject Name="Text2" Left="69.6" Top="3.78" Width="94.5" Height="18.9" Text="[qu_dependentes.CHAPA]" Font="Arial, 10pt"/>
      <TextObject Name="Text3" Left="167.83" Top="3.4" Width="94.5" Height="18.9" Text="Funcinário:" Font="Arial, 10pt, style=Bold"/>
      <TextObject Name="Text4" Left="269.6" Top="3.4" Width="362.88" Height="18.9" Text="[qu_dependentes.nome]" Font="Arial, 10pt"/>
      <TextObject Name="Text5" Left="7.45" Top="37.8" Width="94.5" Height="18.9" Text="Dependente" Font="Arial, 10pt, style=Bold"/>
      <TextObject Name="Text6" Left="269.51" Top="37.8" Width="66.15" Height="18.9" Text="Dt Nasc" Font="Arial, 10pt, style=Bold"/>
      <TextObject Name="Text7" Left="345.65" Top="37.8" Width="47.25" Height="18.9" Text="Sexo" Font="Arial, 10pt, style=Bold"/>
      <TextObject Name="Text8" Left="401.9" Top="37.8" Width="85.05" Height="18.9" Text="Parentesco" Font="Arial, 10pt, style=Bold"/>
      <TextObject Name="Text9" Left="567" Top="37.8" Width="103.95" Height="18.9" Text="Nome Da Mãe" Font="Arial, 10pt, style=Bold"/>
      <TextObject Name="Text10" Left="706.3" Top="37.8" Width="47.25" Height="18.9" Text="CPF" Font="Arial, 10pt, style=Bold"/>
      <TextObject Name="Text11" Left="765.45" Top="37.8" Width="103.95" Height="18.9" Text="Estado Civil" Font="Arial, 10pt, style=Bold"/>
      <TextObject Name="Text12" Left="888.3" Top="18.9" Width="47.25" Height="37.8" Text="Sal&#13;&#10;Fam" HorzAlign="Center" VertAlign="Center" Font="Arial, 10pt, style=Bold"/>
      <TextObject Name="Text13" Left="963.9" Top="18.9" Width="47.25" Height="37.8" Text="Dep&#13;&#10;IR" HorzAlign="Center" VertAlign="Center" Font="Arial, 10pt, style=Bold"/>
      <DataBand Name="Data1" Top="189.15" Width="1047.06" Height="31.35" Fill.Color="WhiteSmoke" BeforePrintEvent="Data1_BeforePrint" DataSource="Table" KeepTogether="true" KeepDetail="true">
        <TextObject Name="Text14" Left="9.45" Top="6.05" Width="241.92" Height="18.9" Text="[qu_dependentes.NOME_DEPENDENTE]" Font="Arial, 8pt, style=Bold"/>
        <TextObject Name="Text15" Left="269.51" Top="6.05" Width="71.82" Height="18.9" Text="[qu_dependentes.NASCIMENTO]" Format="Date" Format.Format="d" Font="Arial, 8pt, style=Bold"/>
        <TextObject Name="Text16" Left="345.65" Top="6.05" Width="47.25" Height="18.9" Text="[qu_dependentes.SEXO]" Format="Date" Format.Format="d" HorzAlign="Center" VertAlign="Center" Font="Arial, 8pt, style=Bold"/>
        <TextObject Name="mGrau" Left="403.35" Top="6.05" Width="151.2" Height="18.9" Format="Date" Format.Format="d" Font="Arial, 8pt, style=Bold"/>
        <TextObject Name="Text18" Left="567" Top="6.05" Width="139.86" Height="18.9" Text="[qu_dependentes.NOME_MAE]" Format="Date" Format.Format="d" Font="Arial, 8pt, style=Bold"/>
        <TextObject Name="Text19" Left="708.75" Top="6.05" Width="47.25" Height="18.9" Text="[qu_dependentes.CPF]" Format="Date" Format.Format="d" VertAlign="Center" Font="Arial, 8pt, style=Bold"/>
        <TextObject Name="Text20" Left="765.45" Top="6" Width="103.95" Height="18.9" Text="[qu_dependentes.EST_CIVIL]" Format="Date" Format.Format="d" Font="Arial, 8pt, style=Bold"/>
        <TextObject Name="Text21" Left="888.3" Top="6.05" Width="47.25" Height="18.9" Text="[qu_dependentes.SALARIO_FAMILIA_ATE]" Format="Date" Format.Format="d" HorzAlign="Center" VertAlign="Center" Font="Arial, 8pt, style=Bold"/>
        <TextObject Name="Text22" Left="963.9" Top="6.05" Width="47.25" Height="18.9" Text="[qu_dependentes.DEPENDENTE_IR_ATE]" Format="Date" Format.Format="d" HorzAlign="Center" VertAlign="Center" Font="Arial, 8pt, style=Bold"/>
      </DataBand>
      <GroupFooterBand Name="GroupFooter1" Top="223.7" Width="1047.06" Height="9.45" Border.Lines="Bottom" Fill.Color="DarkGray"/>
    </GroupHeaderBand>
    <inherited Name="BndRodape" Top="236.35" Guides="18.9">
      <inherited Name="TxtRodape"/>
      <inherited Name="TxtPaginacao">
        <Formats>
          <GeneralFormat/>
          <GeneralFormat/>
        </Formats>
      </inherited>
      <inherited Name="TxtEndereco">
        <Formats>
          <GeneralFormat/>
          <GeneralFormat/>
          <GeneralFormat/>
          <GeneralFormat/>
          <GeneralFormat/>
          <GeneralFormat/>
          <GeneralFormat/>
        </Formats>
      </inherited>
    </inherited>
  </inherited>
</inherited>
